(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{105:function(e,t,n){e.exports=n(169)},110:function(e,t,n){},112:function(e,t,n){},12:function(e,t,n){"use strict";n.d(t,"i",function(){return h}),n.d(t,"h",function(){return y}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return j});var a=n(2),r=n.n(a),i=n(18),c=n(19),u=n(13),o=n(1),s=n.n(o),l=n(23),d=n(52);n.d(t,"a",function(){return d.a});var f=n(48);n.d(t,"b",function(){return f.a}),n.d(t,"e",function(){return f.c}),n.d(t,"f",function(){return f.d}),n.d(t,"g",function(){return f.e});var m=function(){};function h(e){m=e}function v(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l.a+t);case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:if(!(a=e.sent).maintenance){e.next=11;break}return m(a.maintenance),e.abrupt("return",new Promise(function(){}));case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return(g=Object(u.a)(r.a.mark(function e(t){var n,a=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:20,t=t.trim()){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",v("search_player/".concat(encodeURIComponent(t),"?limit=").concat(n)));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b=function(){function e(t){Object(i.a)(this,e),this._date=void 0,this._date=s()(t).startOf("day")}return Object(c.a)(e,[{key:"getMetadata",value:function(){var e=Object(u.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("count/".concat(this._date.valueOf()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(u.a)(r.a.mark(function e(t,n){var a,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"",e.next=3,v("games/".concat(this._date.valueOf(),"?skip=").concat(t,"&limit=").concat(n,"&tag=").concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),k=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(i.a)(this,e),this._playerId=void 0,this._startDate=void 0,this._endDate=void 0,this._mode=void 0,this._playerId=t,this._startDate=n,this._endDate=a,this._mode=r}return Object(c.a)(e,[{key:"_getDatePath",value:function(){var e="";return this._startDate&&(e+="/".concat(this._startDate.valueOf()),this._endDate&&(e+="/".concat(this._endDate.valueOf()))),e}},{key:"_getParams",value:function(){return"".concat(this._playerId).concat(this._getDatePath(),"?mode=").concat(this._mode)}},{key:"getMetadata",value:function(){var e=Object(u.a)(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("player_stats/".concat(this._getParams())).then(function(e){return e.extended_stats=v("player_extended_stats/".concat(t._getParams())).then(function(t){return e.extended_stats=t}),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(u.a)(r.a.mark(function e(t,n){var a,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"",e.next=3,v("player_records/".concat(this._playerId).concat(this._getDatePath(),"?skip=").concat(t,"&limit=").concat(n,"&mode=").concat(this._mode,"&tag=").concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),_=Object.freeze({create:function(e){return new E(new b(e))}}),j=Object.freeze({create:function(e,t,n,a){return new E(new k(e,t?s()(t).startOf("day"):void 0,n?s()(n).endOf("day"):void 0,a))}}),E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;Object(i.a)(this,e),this._loader=void 0,this._metadata=void 0,this._countPromise=void 0,this._chunks=void 0,this._itemsPerChunk=void 0,this._filterPredicate=void 0,this._filteredIndices=void 0,this._filterResultCache=void 0,this._loader=t,this._metadata=null,this._countPromise=null,this._chunks=[],this._itemsPerChunk=n,this._filterPredicate=null,this._filteredIndices=null,this._filterResultCache={}}return Object(c.a)(e,[{key:"setFilterPredicate",value:function(e){this._filterPredicate!==e&&(this._filterPredicate=e,this._filterResultCache={},this.updateFilteredIndices())}},{key:"updateFilteredIndices",value:function(){if(this._filteredIndices=null,this._filterPredicate){var e=this.getMetadataSync();if(e){for(var t=e.count,n=0,a=0,r=[],i=0;i<t;i++){var c=this._chunks[Math.floor(i/this._itemsPerChunk)];if(!c||c instanceof Promise)r.push(i);else{a++;var u=c[i%this._itemsPerChunk],o=this._filterResultCache[u.uuid];void 0===o&&(this._filterResultCache[u.uuid]=o=this._filterPredicate(u)),o&&(r.push(i),n++)}}this._filteredIndices=r,n<10&&a>=this._itemsPerChunk&&this._triggerFullLoad()}}}},{key:"getMetadataSync",value:function(){return!this._metadata||this._metadata instanceof Promise?null:this._metadata}},{key:"getCountMaybeSync",value:function(){var e=this.getMetadataSync();return e?this._filteredIndices?this._filteredIndices.length:e.count:this.getCount()}},{key:"getCount",value:function(){var e=Object(u.a)(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getMetadataSync()){e.next=3;break}return e.abrupt("return",this.getCountMaybeSync());case 3:if(this._metadata||(this._metadata=this._loader.getMetadata().then(function(e){if(!e)throw console.log("No metadata returned"),new Error("No metadata returned");return t._metadata=e,t.updateFilteredIndices(),t._countPromise=null,e})),!this._countPromise){e.next=6;break}return e.abrupt("return",this._countPromise);case 6:return this._countPromise=Promise.resolve(this._metadata).then(function(){return new Promise(function(e){return setTimeout(e,100)})}).then(function(){return t.getCountMaybeSync()}),e.abrupt("return",this._countPromise);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUnfilteredCountSync",value:function(){var e=this.getMetadataSync();return e?e.count:null}},{key:"isItemLoaded",value:function(e){var t=this._mapItemIndex(e);if(null===t)return!1;var n=Math.floor(t/this._itemsPerChunk);return!!this._chunks[n]&&!(this._chunks[n]instanceof Promise)}},{key:"getItem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this._mapItemIndex(e);if(null===a)return this.getCount().then(function(n){return e>n-1||null===t._mapItemIndex(e)?null:t.getItem(e)});var r=Math.floor(a/this._itemsPerChunk),i=a%this._itemsPerChunk,c=this._chunks[r];return!c||c instanceof Promise?this._getChunk(r).then(function(e){return e[i]}):(n||this._filteredIndices||this.preload(e+this._itemsPerChunk),c[i])}},{key:"preload",value:function(e){var t=this.getCountMaybeSync();t instanceof Promise||e>=t||this.getItem(e,!0)}},{key:"_mapItemIndex",value:function(e){var t=this.getCountMaybeSync();if(t instanceof Promise)return null;if(e<0)return null;var n=t-e-1;return n<0?null:this._filteredIndices?this._filteredIndices[n]:n}},{key:"_getChunk",value:function(){var e=Object(u.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._chunks[t]||(this._chunks[t]=this._loadChunk(t)),e.abrupt("return",this._chunks[t]);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_triggerFullLoad",value:function(){var e=this.getCountMaybeSync();if("number"===typeof e)for(var t=Math.ceil(e/this._itemsPerChunk),n=0;n<t;n++)this._chunks[n]||this._getChunk(n)}},{key:"_loadChunk",value:function(){var e=Object(u.a)(r.a.mark(function e(t){var n,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCount();case 2:if(n=e.sent,a=Math.ceil(n/this._itemsPerChunk)){e.next=6;break}return e.abrupt("return",[]);case 6:if(!(t>=a)){e.next=9;break}return console.warn("Loading out-of-index chunk: ".concat(t,", number of items: ").concat(n)),e.abrupt("return",[]);case 9:return e.next=11,this._loader.getRecords(this._itemsPerChunk*t,this._itemsPerChunk,t===a-1?n.toString():"");case 11:return(i=e.sent).length<this._itemsPerChunk&&t<a-1&&console.warn("Unexpected number of items in chunk:",i.length),this._chunks[t]=i,this.updateFilteredIndices(),e.abrupt("return",i);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()},169:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(39),c=(n(110),n(112),n(27)),u=n(38),o=n.n(u),s=n(76),l=function(e){var t=e.title,n=void 0===t?void 0:t,a=e.children,i=void 0===a?void 0:a,c=e.fluid,u=void 0!==c&&c;return r.a.createElement("div",{className:"my-5 container".concat(u?"-fluid":"")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},n&&r.a.createElement("h2",{className:"mb-4"},n),i)))},d=n(3),f=n(36);function m(e){var t=e.className,n=void 0===t?"":t,i=e.type,c=void 0===i?"info":i,u=e.container,o=void 0===u?r.a.Fragment:u,s=e.stateName,l=void 0===s?"":s,m=e.closable,h=void 0===m||m,v=e.children,p=void 0===v?void 0:v,y="alertState_".concat(l),g=Object(a.useState)(function(){return l&&!!localStorage.getItem(y)}),b=Object(d.a)(g,2),k=b[0],_=b[1];if(Object(a.useEffect)(function(){l&&k&&localStorage.setItem(y,"true")},[k,l,y]),k&&h)return null;var j=o;return r.a.createElement(j,null,r.a.createElement("div",{className:"alert alert-".concat(c," alert-dismissible fade show ").concat(n),role:"alert"},p,h&&r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(e){e.preventDefault(),_(!0),Object(f.c)()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))}var h=n(23);function v(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,null,r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/"},h.c))),r.a.createElement(m,{container:l,stateName:"topNote"},r.a.createElement("h4",null,"\u8bf4\u660e"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u672c\u9875\u9762\u6570\u636e\u7531\u7b2c\u4e09\u65b9\u7ef4\u62a4\uff0c\u4e0d\u80fd\u7edd\u5bf9\u4fdd\u8bc1\u5b8c\u6574\u548c\u6b63\u786e\uff0c\u4fe1\u606f\u4ec5\u4f9b\u53c2\u8003\uff0c\u8bf7\u52ff\u7528\u4e8e\u4e0d\u826f\u7528\u9014\u3002"),r.a.createElement("li",null,"\u8bb0\u5f55\u5305\u542b\u96c0\u9b42\u56fd\u670d\u56db\u4eba\u534a\u5e84\u6bb5\u4f4d\u6218\u7389\u4e4b\u95f4\u53ca\u738b\u5ea7\u4e4b\u95f4\u7684\u724c\u8c31\u3002"),r.a.createElement("li",null,"\u5bf9\u5c40\u6570\u636e\u6536\u96c6\u4ece 2019 \u5e74 8 \u6708 23 \u65e5\u5f00\u59cb\uff0c\u4e4b\u524d\u7684\u5bf9\u5c40\u5df2\u65e0\u6cd5\u83b7\u53d6\u3002"),r.a.createElement("li",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\u5168\u90e8\u5bf9\u5c40\u90fd\u4f1a\u88ab\u8bb0\u5f55\uff0c\u4f46\u4e0d\u6392\u9664\u56e0\u7f51\u7edc\u95ee\u9898\u9057\u6f0f\u90e8\u5206\u5bf9\u5c40\u7684\u60c5\u51b5\u3002\u53e6 2019 \u5e74 10 \u6708 10 \u65e5\u524d\u56e0\u7a0b\u5e8f Bug \u6bcf\u5929\u665a\u95f4\u53ef\u80fd\u9057\u6f0f\u6389 10% ~ 20% \u7684\u5bf9\u5c40\uff0c\u6b64 Bug \u76ee\u524d\u5df2\u7ecf\u4fee\u590d\u3002"),r.a.createElement("li",null,"\u9875\u9762\u4e0d\u662f\u5b9e\u65f6\u66f4\u65b0\uff0c\u5bf9\u5c40\u4e00\u822c\u4f1a\u5728\u7ed3\u675f\u540e\u6570\u5206\u949f\u81f3\u6570\u5c0f\u65f6\u5185\u51fa\u73b0\u3002"),r.a.createElement("li",null,"\u5982\u6709\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u8bf7\u6233 ",r.a.createElement("a",{href:"mailto:i@sapika.ch"},"SAPikachu (i@sapika.ch)")," \u6216"," ",r.a.createElement("a",{href:"https://github.com/SAPikachu/amae-koromo/"},"\u63d0\u4ea4 Issue"),"\u3002"))))}var p=n(42),y=n(12);function g(e){var t=e.children,n=Object(a.useState)(""),r=Object(d.a)(n,2),i=r[0],c=r[1];return Object(y.i)(c),i?a.createElement(m,{container:l,closable:!1},a.createElement("h4",null,"\u4e34\u65f6\u7ef4\u62a4\u516c\u544a"),a.createElement("p",null,i)):t}var b=o()({loader:function(){return n.e(2).then(n.t.bind(null,315,7))},loading:function(){return r.a.createElement(r.a.Fragment,null)}});var k=function(){return r.a.createElement(c.a,null,r.a.createElement(b,null,r.a.createElement("title",null,h.c)),r.a.createElement(g,null,r.a.createElement(s.a,null,r.a.createElement(v,null),r.a.createElement(l,null,r.a.createElement(p.a,null)))))},_=document.getElementById("root");Object(i.render)(a.createElement(k,null),_)},23:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u});var a=n(1),r=n.n(a),i="".concat("https://ak-data-1.sapk.ch/","api/"),c="\u96c0\u9b42\u724c\u8c31\u5c4b",u=r()("2019-08-23","YYYY-MM-DD")},28:function(e,t,n){"use strict";var a=n(0),r=n.n(a);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"checkbox",items:[],groupKey:"default",selectedItemKeys:null,onChange:function(){}},t=e.type,n=e.items,a=e.groupKey,i=function(){if("checkbox"===e.type){var t=e.selectedItemKeys,a=e.onChange;return{setSelected:function(e,r){if((!r||t&&!t.has(e))&&(r||!t||t.has(e))){var i=new Set(t||n.map(function(e){return e.key}));r?i.add(e):i.delete(e),a(i)}},isChecked:function(e){return!t||t.has(e)}}}var r=e.selectedItemKey,i=e.onChange;return{setSelected:function(e,t){t&&i(e)},isChecked:function(e){return r===e}}}(),c=i.setSelected,u=i.isChecked;return r.a.createElement(r.a.Fragment,null,n.map(function(e){return r.a.createElement("div",{className:"form-check form-check-inline",key:e.key},r.a.createElement("input",{className:"form-check-input",type:t,id:"CG_".concat(a,"_").concat(e.key),name:"CG_".concat(a,"_").concat(e.key),value:e.key,checked:u(e.key),onChange:function(t){return c(e.key,t.currentTarget.checked)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"CG_".concat(a,"_").concat(e.key)},e.label))}))}var c=n(1),u=n.n(c);function o(e){var t=e.date,n=void 0===t?u()():t,i=e.onChange,c=void 0===i?function(){}:i,o=e.className,s=void 0===o?"":o,l=e.min,d=void 0===l?0:l,f=e.max,m=void 0===f?u()():f,h=Object(a.useCallback)(function(e){return c(u()(e.currentTarget.value,"YYYY-MM-DD"))},[c]);return r.a.createElement("input",{className:s,type:"date",value:u()(n).format("YYYY-MM-DD"),min:d?u()(d).format("YYYY-MM-DD"):void 0,max:m?u()(m).format("YYYY-MM-DD"):void 0,onChange:h})}var s=n(75);n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s.a})},36:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return s});var a=n(3),r=n(0);function i(){requestAnimationFrame(function(){return window.dispatchEvent(new UIEvent("resize"))}),setTimeout(function(){window.dispatchEvent(new UIEvent("resize"))},200)}function c(){window.scrollTo(0,0),requestAnimationFrame(function(){return window.scrollTo(0,0)})}var u=function(e){return e>0?"".concat((100*e).toFixed(2),"%"):""},o={notFinished:"yes"};function s(e){var t=Object(r.useState)(o),n=Object(a.a)(t,2),i=n[0],c=n[1];if(Object(r.useEffect)(function(){e instanceof Promise?(c(o),e.then(function(e){return c(e)})):c(e)},[e]),i!==o)return i}},37:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n.n(a);function i(e){var t=e.size,n=void 0===t?"normal":t;return r.a.createElement("div",{className:"d-flex justify-content-center m-".concat("normal"===n?5:1)},r.a.createElement("div",{className:"spinner-border ".concat("normal"===n?"":"spinner-border-sm"),role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))}},42:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(9),c=n(7),u=n(1),o=n.n(u),s=n(24),l=n(3),d=n(36);function f(e,t){return e?o()(e,"YYYY-MM-DD"):t}var m={player:function(e){return{type:"player",playerId:e.id,startDate:f(e.startDate,null),endDate:f(e.endDate,null),selectedMode:e.mode||"",version:0}},listing:function(e){var t=f(e.date,null);return t&&!t.isValid()?"/":{type:void 0,date:t?t.startOf("day").valueOf():null,selectedMode:e.mode||"",searchText:e.search||"",version:0}}};function h(e){var t=e.view,n=Object(i.i)(),u=Object(c.c)(),o=Object(l.a)(u,2),f=o[0],h=o[1],v=Object(i.h)();Object(a.useEffect)(d.c,[f.type]);var p=v.state;if(p&&p.model.version===f.version)return delete f.pendingRouteUpdate,v.pathname!==p.pathname?r.a.createElement(i.a,{to:{pathname:p.pathname,state:p}}):r.a.createElement(r.a.Fragment,null);if(!p){var y=m[t](n);if("string"===typeof y)return r.a.createElement(i.a,{to:y});var g=Object(s.a)({},y,{version:f.version});return h(g),Object(d.b)(),r.a.createElement(i.a,{to:{pathname:v.pathname,state:{pathname:v.pathname,model:c.a.toPlain(g)}}})}if(f.pendingRouteUpdate){var b=F(f);return delete f.pendingRouteUpdate,r.a.createElement(i.a,{to:{pathname:b,state:{pathname:b,model:c.a.toPlain(f)}}})}return h(c.a.fromPlain(p.model)),r.a.createElement(r.a.Fragment,null)}var v=n(74),p=n(28),y=n(23),g=n(98),b=o()().startOf("day");function k(e){var t=e.className,n=void 0===t?"":t,i=Object(c.c)(),u=Object(l.a)(i,2),o=u[0],s=u[1],d=Object(a.useCallback)(function(e){return s({searchText:e.currentTarget.value})},[s]),f=Object(a.useCallback)(function(e){return s({selectedMode:e})},[s]),m=Object(a.useCallback)(function(e){return s({date:e})},[s]);return void 0!==o.type?null:r.a.createElement("div",{className:n},r.a.createElement(p.c,{title:"\u65e5\u671f"},r.a.createElement(p.b,{min:y.b,date:o.date||b,onChange:m,className:"form-control"})),r.a.createElement(p.c,{title:"\u67e5\u627e\u73a9\u5bb6"},r.a.createElement("input",{type:"text",className:"form-control",value:o.searchText,onChange:d})),r.a.createElement(p.c,null,r.a.createElement(g.a,{mode:o.selectedMode,onChange:f})))}var _=n(38),j=n.n(_),E=n(37),O=n(48),x=n(12),M=n(27),w={},P=6,C=20,D=function(e){return e.toLowerCase().trim()};function I(e){var t=e.searchText,n=Object(a.useState)(0),i=Object(l.a)(n,2),c=i[0],u=i[1],o=Object(a.useMemo)(function(){var e=function(e){var t=D(e);for(e=t;e;){var n=w[e];if(n&&!(n instanceof Promise))return{isExactMatch:e===t,result:n};e=e.slice(0,e.length-1)}return null}(t);if(!e)return[[],!0];if(e.isExactMatch)return[e.result,!1];var n=D(t),a=e.result.length>=C,r=[];return e.result.forEach(function(e){D(e.nickname).startsWith(n)?r.push(e):r.length&&(a=!1)}),[r,a&&r.length<P,a]},[t,c]),s=Object(l.a)(o,3),d=s[0],f=s[1],m=s[2];return Object(a.useEffect)(function(){var e=D(t);if(!w[e]&&f){var n=!1,a=setTimeout(function(){a=void 0,n||w[e]||(w[e]=Object(x.h)(e).then(function(t){return w[e]=t,n||u((new Date).getTime()),t}))},500);return function(){n=!0,a&&clearTimeout(a)}}},[t,f]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"text-center mb-2"},"\u73a9\u5bb6\u524d\u7f00\u641c\u7d22"),r.a.createElement("ul",{className:"list-unstyled row mb-2"},d.slice(0,P).map(function(e){return r.a.createElement("li",{key:e.id,className:"col-6"},r.a.createElement(M.b,{to:U(e.id)},r.a.createElement("span",null,"[",Object(O.e)(e.level.id),"] ",e.nickname)))})),f&&r.a.createElement(E.a,{size:"small"})||(d.length>P||m)&&r.a.createElement("small",{className:"d-block text-center text-muted"},"\uff08\u8f93\u5165\u66f4\u957f\u540d\u5b57\u663e\u793a\u5176\u5b83\u7ed3\u679c\uff09"))}function S(e){var t=e.className,n=void 0===t?"":t,a=Object(c.c)(),i=Object(l.a)(a,1)[0];return"playerId"in i||!i.searchText?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:n},r.a.createElement(I,{searchText:i.searchText}))}n.d(t,"b",function(){return F}),n.d(t,"c",function(){return U});var R=j()({loader:function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,522))},loading:function(){return r.a.createElement(E.a,null)}}),Y=j()({loader:function(){return Promise.all([n.e(1),n.e(9),n.e(5)]).then(n.bind(null,523))},loading:function(){return r.a.createElement(E.a,null)}}),N="/player/:id/:mode([0-9]+)?/:startDate(\\d{4}-\\d{2}-\\d{2})?/:endDate(\\d{4}-\\d{2}-\\d{2})?",T="/:date(\\d{4}-\\d{2}-\\d{2})/:mode([0-9]+)?/:search?";function F(e){return"player"===e.type?Object(i.f)(N,{id:e.playerId,startDate:e.startDate?o()(e.startDate).format("YYYY-MM-DD"):void 0,endDate:e.endDate?o()(e.endDate).format("YYYY-MM-DD"):void 0,mode:e.selectedMode||void 0}):e.selectedMode||e.searchText||e.date?Object(i.f)(T,{date:o()(e.date||new Date).format("YYYY-MM-DD"),mode:e.selectedMode||void 0,search:e.searchText||void 0}):"/"}function U(e){return F({type:"player",playerId:e.toString(),startDate:null,endDate:null,selectedMode:"",version:0})}t.a=function(){return r.a.createElement(c.b,null,r.a.createElement(v.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:N},r.a.createElement(h,{view:"player"}),r.a.createElement(R,null),r.a.createElement(Y,{showFullTime:!0,showStartEnd:!1})),r.a.createElement(i.b,{exact:!0,path:["/",T]},r.a.createElement(h,{view:"listing"}),r.a.createElement("div",{className:"row"},r.a.createElement(k,{className:"col"}),r.a.createElement(S,{className:"col-12 col-sm-6 col-md-4"})),r.a.createElement(Y,null)),r.a.createElement(i.b,null,r.a.createElement(i.a,{to:"/"})))))}},48:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"e",function(){return f}),n.d(t,"b",function(){return m});var a=n(18),r=n(19),i=n(1),c=n.n(i),u=[20,80,200,600,800,1e3,1200,1400,2e3,2800,3200,3600,4e3,6e3,9e3],o=["\u4e00\u4f4d","\u4e8c\u4f4d","\u4e09\u4f4d","\u56db\u4f4d"],s=["#28a745","#17a2b8","#6c757d","#dc3545"],l=Object.freeze({getRankIndexByPlayer:function(e,t){var n=("object"===typeof t?t.accountId:t).toString(),a=e.players.map(function(e,t){return{player:e,index:t}});a.sort(function(e,t){return 5-t.index+t.player.score-(5-e.index+e.player.score)});for(var r=0;r<a.length;r++)if(a[r].player.accountId.toString()===n)return r;return-1},getPlayerRankLabel:function(e,t){return o[l.getRankIndexByPlayer(e,t)]||""},getPlayerRankColor:function(e,t){return s[l.getRankIndexByPlayer(e,t)]},encodeAccountId:function(e){return 1358437+(7*e+1117113^86216345)},formatFullStartTime:function(e){return c()(1e3*e.startTime).format("YYYY/M/D HH:mm")},getRecordLink:function(e,t){var n="object"===typeof t?t.accountId:t,a=n?"_a".concat(l.encodeAccountId("number"===typeof n?n:parseInt(n))):"";return"https://www.majsoul.com/1/?paipu=".concat(e.uuid).concat(a)}}),d=function(){function e(t){Object(a.a)(this,e),this._majorRank=void 0,this._minorRank=void 0;var n=t%1e4;this._majorRank=Math.floor(n/100),this._minorRank=n%100}return Object(r.a)(e,[{key:"getTag",value:function(){var e="\u521d\u58eb\u6770\u8c6a\u5723\u9b42"[this._majorRank-1];return this._majorRank==="\u521d\u58eb\u6770\u8c6a\u5723\u9b42".length?e:e+this._minorRank}},{key:"getMaxPoint",value:function(){return u[3*(this._majorRank-1)+this._minorRank-1]}},{key:"getStartingPoint",value:function(){return 1===this._majorRank?0:this._majorRank==="\u521d\u58eb\u6770\u8c6a\u5723\u9b42".length?1e4:this.getMaxPoint()/2}},{key:"getNextLevel",value:function(){if(this._majorRank==="\u521d\u58eb\u6770\u8c6a\u5723\u9b42".length)return this;var t=this._majorRank,n=this._minorRank+1;return n>3&&(t++,n=1),new e(100*t+n)}},{key:"getPreviousLevel",value:function(){if(1===this._majorRank&&1===this._minorRank)return this;var t=this._majorRank,n=this._minorRank-1;return n<1&&(t--,n=3),new e(100*t+n)}},{key:"getAdjustedLevel",value:function(e){var t=this.getMaxPoint(),n=this;return t&&e>=t?(t=(n=this.getNextLevel()).getMaxPoint(),e=n.getStartingPoint()):e<0&&(!t||1===n._majorRank||2===n._majorRank&&1===n._minorRank?e=0:(t=(n=this.getPreviousLevel()).getMaxPoint(),e=n.getStartingPoint())),n}},{key:"formatWithAdjustedScore",value:function(e){var t=this.getAdjustedLevel(e);return"".concat(t.getTag()," - ").concat(this.formatAdjustedScore(e))}},{key:"formatAdjustedScore",value:function(e){var t=this.getAdjustedLevel(e);return"".concat(t===this?Math.max(e,0):t.getStartingPoint()).concat(t.getTag()?"/"+t.getMaxPoint():"")}}]),e}();function f(e){return new d(e).getTag()}var m=Object.freeze({format:function(e){return new d(e.id).formatWithAdjustedScore(e.score+e.delta)},formatAdjustedScore:function(e){return new d(e.id).formatAdjustedScore(e.score+e.delta)},getTag:function(e){return new d(e.id).getAdjustedLevel(e.score+e.delta).getTag()}})},52:function(e,t,n){"use strict";var a;!function(e){e[e["\u738b\u5ea7"]=16]="\u738b\u5ea7",e[e["\u7389"]=12]="\u7389"}(a||(a={})),t.a=a;Object.keys(a).filter(function(e){return"number"===typeof a[e]}).length},7:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return v});var a=n(3),r=n(24),i=n(1),c=n.n(i),u=n(0),o=n.n(u),s=n(9),l=Object.freeze({toPlain:function(e){return"player"===e.type?Object(r.a)({},e,{startDate:e.startDate?c()(e.startDate).valueOf():null,endDate:e.endDate?c()(e.endDate).valueOf():null}):Object(r.a)({},e,{type:void 0,date:e.date?c()(e.date).valueOf():null})},fromPlain:function(e){return"player"===e.type?e:void 0===e.type?{type:void 0,date:e.date||null,searchText:e.searchText||"",selectedMode:e.selectedMode}:(console.warn("Unknown model data from location state:",e),d)},removeExtraParams:function(e){return"player"===e.type?{type:"player",playerId:e.playerId,selectedMode:"",startDate:null,endDate:null,version:0}:{type:void 0,searchText:"",selectedMode:"",date:null,version:0}}}),d={type:void 0,date:null,selectedMode:"",searchText:""},f=o.a.createContext([Object(r.a)({},d,{version:0}),function(){}]),m=function(){return Object(u.useContext)(f)};function h(e,t){return e===t||!(!e||!t)&&c()(e).isSame(t,"day")}function v(e){var t=e.children,n=Object(s.h)(),i=Object(u.useReducer)(function(e,t){return function(e,t){if(e.type!==t.type)return!0;if(void 0!==t.selectedMode&&t.selectedMode!==e.selectedMode)return!0;if(void 0===e.type&&t.type===e.type){if(void 0!==t.date&&!h(t.date,e.date))return!0;if(void 0!==t.searchText&&t.searchText!==e.searchText)return!0}if("player"===e.type&&t.type===e.type){if(void 0!==t.playerId&&t.playerId!==e.playerId)return!0;if(void 0!==t.startDate&&!h(e.startDate,t.startDate))return!0;if(void 0!==t.endDate&&!h(e.endDate,t.endDate))return!0}return!1}(e,t)?Object(r.a)({},e.type===t.type?e:{},function(e){void 0===e.type&&e.date&&(e.date=c()(e.date).valueOf());for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];"type"!==a&&void 0===e[a]&&delete e[a]}return e}(t),{version:e.version+1,pendingRouteUpdate:!0}):e},null,function(){return Object(r.a)({},d,l.fromPlain((n.state||{}).model||{}),{version:(new Date).getTime()})}),m=Object(a.a)(i,2),v=m[0],p=m[1],y=Object(u.useMemo)(function(){return[v,p]},[v,p]);return o.a.createElement(f.Provider,{value:y},t)}},74:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b});var a=n(3),r=n(18),i=n(19),c=n(0),u=n.n(c),o=n(1),s=n.n(o),l=n(12),d=n(7),f=n(42),m={loading:!0},h=new(function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"getCount",value:function(){return 0}},{key:"getUnfilteredCount",value:function(){return 0}},{key:"getMetadata",value:function(){return null}},{key:"getItem",value:function(){return m}},{key:"isItemLoaded",value:function(){return!1}}]),e}()),v=function(){},p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;Object(r.a)(this,e),this._provider=void 0,this._onDataUpdate=void 0,this._triggeredRequest=void 0,this._provider=t,this._onDataUpdate=n,this._triggeredRequest=!1}return Object(i.a)(e,[{key:"_installHook",value:function(e){var t=this;this._triggeredRequest||(this._triggeredRequest=!0,e.then(function(){return t._callHook(!1)}).catch(function(){return t._callHook(!0)}))}},{key:"_callHook",value:function(e){this._onDataUpdate(e)}},{key:"getCount",value:function(){var e=this._provider.getCountMaybeSync();return e instanceof Promise?(this._installHook(e),0):e}},{key:"getUnfilteredCount",value:function(){return this._provider.getUnfilteredCountSync()||0}},{key:"getMetadata",value:function(){return this._provider.getMetadataSync()}},{key:"getItem",value:function(e){return e>=this.getCount()?m:this._provider.isItemLoaded(e)?this._provider.getItem(e):(this._triggeredRequest||this._installHook(this._provider.getItem(e)),m)}},{key:"isItemLoaded",value:function(e){return!(e<0)&&this._provider.isItemLoaded(e)}},{key:"setUpdateHook",value:function(e){this._onDataUpdate=e}},{key:"cancelUpdateHook",value:function(){this._onDataUpdate=v}}]),e}(),y=u.a.createContext(h),g=function(){return Object(c.useContext)(y)};y.Consumer;function b(e){var t=e.children,n=Object(d.c)(),r=Object(a.a)(n,2),i=r[0],o=r[1],m=Object(c.useState)(function(){return{}}),v=Object(a.a)(m,1)[0],g=function(e){if(void 0!==e.type)return Object(c.useMemo)(function(){return null},[null,""]);var t=(e.searchText||"").trim()||"",n=t||e.selectedMode;return Object(c.useMemo)(function(){return n?function(n){return(!e.selectedMode||e.selectedMode===n.modeId.toString())&&!!n.players.some(function(e){return e.nickname.toLowerCase().indexOf(t)>-1})}:null},[void 0===e.type&&e.selectedMode||null,t])}(i),b=Object(c.useMemo)(function(){var e=function(e){if(void 0===e.type)return s()(e.date||s()()).startOf("day").valueOf().toString();if("player"===e.type)return Object(f.b)(e);throw new Error("Unknown model type")}(i);return v[e]||(v[e]=function(e){if(void 0===e.type)return l.c.create(e.date||s()().startOf("day"));if("player"===e.type)return l.d.create(e.playerId,e.startDate,e.endDate,e.selectedMode);throw new Error("Not implemented")}(i)),v[e]},[i,v]),k=Object(c.useState)(function(){return h}),_=Object(a.a)(k,2),j=_[0],E=_[1],O=Object(c.useCallback)(function(e){if(e)o(d.a.removeExtraParams(i));else{b.setFilterPredicate(g);var t=new p(b);E(t)}},[b,g,i,o]);return Object(c.useEffect)(O,[O]),Object(c.useEffect)(function(){var e=j;if(e instanceof p)return function(){return e.cancelUpdateHook()}},[j]),Object(c.useEffect)(function(){j instanceof p&&j.setUpdateHook(O)},[j,O]),Object(c.useEffect)(function(){b.getCountMaybeSync()},[b]),u.a.createElement(y.Provider,{value:j},t)}},75:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n.n(a),i=function(e){var t=e.title,n=void 0===t?"":t,a=e.inline,i=void 0!==a&&a,c=e.children,u=void 0===c?void 0:c;return r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-".concat(i?"lg":"md","-2 col-form-label")},n),r.a.createElement("div",{className:"col-".concat(i?"lg":"md","-10 ").concat(i?"form-inline":"")},u))}},76:function(e,t,n){"use strict";n.d(t,"b",function(){return u});var a=n(0),r=n.n(a),i=n(102),c=r.a.createContext({}),u=function(){return Object(a.useContext)(c)};t.a=function(e){var t=e.children;return r.a.createElement(i.a,null,function(e){return r.a.createElement(c.Provider,{value:e},t)})}},98:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),r=n.n(a),i=n(28),c=n(12),u=Object.keys(c.a).filter(function(e){return"string"!==typeof c.a[e]}).map(function(e){return{key:String(c.a[e]),label:e}});function o(e){var t=e.mode,n=e.onChange;return r.a.createElement(i.a,{type:"radio",groupKey:"ModeSelector",items:u,selectedItemKey:t||"",onChange:n})}u.unshift({key:"",label:"\u5168\u90e8"})}},[[105,10,8]]]);
//# sourceMappingURL=main.ee0a42e7.chunk.js.map