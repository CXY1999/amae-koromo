{"version":3,"sources":["data/types/ranking.ts","components/ranking/deltaRanking.tsx","components/ranking/index.tsx"],"names":["RankingTimeSpan","RankingTable","rows","className","map","x","key","id","to","generatePlayerPathById","LevelWithDelta","getTag","level","nickname","delta","DeltaRanking","data1w","useAsyncFactory","getDeltaRanking","OneWeek","data4w","FourWeeks","useState","modeId","setModeId","mode","onChange","bottom","top","Routes","stateName"],"mappings":"8HAEYA,E,yCAAAA,K,aAAAA,E,gBAAAA,M,yDCUZ,SAASC,EAAT,GAA4D,IAAD,IAAnCC,YAAmC,MAA5B,GAA4B,EACzD,OACE,2BAAOC,UAAU,uBACf,+BACGD,EAAKE,KAAI,SAAAC,GAAC,OACT,wBAAIC,IAAKD,EAAEE,IACT,4BACE,kBAAC,IAAD,CAAMC,GAAIC,YAAuBJ,EAAEE,KAAnC,IACIG,IAAeC,OAAON,EAAEO,OAD5B,KACsCP,EAAEQ,WAG1C,wBAAIV,UAAU,cAAcE,EAAES,aAQ3B,SAASC,IACtB,IAAMC,EAASC,aAAgB,kBAAMC,YAAgBlB,EAAgBmB,WAAU,IACzEC,EAASH,aAAgB,kBAAMC,YAAgBlB,EAAgBqB,aAAY,IAF5C,EAGTC,mBAAS,IAHA,mBAG9BC,EAH8B,KAGtBC,EAHsB,KAIrC,OAAKR,GAAWI,EAId,oCACE,yBAAKjB,UAAU,OACb,yBAAKA,UAAU,OACb,kBAAC,IAAD,CAAcsB,KAAMF,EAAQG,SAAUF,MAG1C,yBAAKrB,UAAU,OACb,yBAAKA,UAAU,YACb,wBAAIA,UAAU,eAAd,sBACA,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,wBAAIA,UAAU,eAAd,gBACA,kBAACF,EAAD,CAAcC,KAAMc,EAAOO,GAAU,KAAKI,SAF5C,KAIA,yBAAKxB,UAAU,YACb,wBAAIA,UAAU,eAAd,gBACA,kBAACF,EAAD,CAAcC,KAAMkB,EAAOG,GAAU,KAAKI,SAF5C,OAMJ,yBAAKxB,UAAU,YACb,wBAAIA,UAAU,eAAd,sBACA,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,wBAAIA,UAAU,eAAd,gBACA,kBAACF,EAAD,CAAcC,KAAMc,EAAOO,GAAU,KAAKK,MAF5C,KAIA,yBAAKzB,UAAU,YACb,wBAAIA,UAAU,eAAd,gBACA,kBAACF,EAAD,CAAcC,KAAMkB,EAAOG,GAAU,KAAKK,MAF5C,SA9BD,kBAAC,IAAD,M,YC/BI,SAASC,IACtB,OACE,6BACE,kBAAC,IAAD,CAAOC,UAAU,iBACf,wBAAI3B,UAAU,QAAd,gBADF,sHAIA,kBAACY,EAAD,OAZN","file":"static/js/12.c6ad123a.chunk.js","sourcesContent":["import { LevelWithDelta } from \"./level\";\n\nexport enum RankingTimeSpan {\n  OneWeek = \"1w\",\n  FourWeeks = \"4w\"\n}\nexport type DeltaRankingItem = {\n  id: number;\n  nickname: string;\n  level: LevelWithDelta;\n  delta: number;\n}\nexport type DeltaRankingResponse = {\n  [modeId: string]: {\n    top: DeltaRankingItem[];\n    bottom: DeltaRankingItem[];\n  }\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { DeltaRankingItem, RankingTimeSpan } from \"../../data/types/ranking\";\nimport { useAsyncFactory } from \"../../utils\";\nimport { getDeltaRanking } from \"../../data/source/misc\";\nimport Loading from \"../misc/loading\";\nimport { generatePlayerPathById } from \"../gameRecords/routes\";\nimport { LevelWithDelta } from \"../../data/types\";\nimport { useState } from \"react\";\nimport { ModeSelector } from \"../gameRecords/modeSelector\";\n\nfunction RankingTable({ rows = [] as DeltaRankingItem[] }) {\n  return (\n    <table className=\"table table-striped\">\n      <tbody>\n        {rows.map(x => (\n          <tr key={x.id}>\n            <td>\n              <Link to={generatePlayerPathById(x.id)}>\n                [{LevelWithDelta.getTag(x.level)}] {x.nickname}\n              </Link>\n            </td>\n            <td className=\"text-right\">{x.delta}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n\nexport default function DeltaRanking() {\n  const data1w = useAsyncFactory(() => getDeltaRanking(RankingTimeSpan.OneWeek), []);\n  const data4w = useAsyncFactory(() => getDeltaRanking(RankingTimeSpan.FourWeeks), []);\n  const [modeId, setModeId] = useState(\"\");\n  if (!data1w || !data4w) {\n    return <Loading />;\n  }\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col\">\n          <ModeSelector mode={modeId} onChange={setModeId} />\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-lg-6\">\n          <h3 className=\"text-center\">苦主榜</h3>\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <h4 className=\"text-center\">一周</h4>\n              <RankingTable rows={data1w[modeId || \"0\"].bottom} />;\n            </div>\n            <div className=\"col-md-6\">\n              <h4 className=\"text-center\">四周</h4>\n              <RankingTable rows={data4w[modeId || \"0\"].bottom} />;\n            </div>\n          </div>\n        </div>\n        <div className=\"col-lg-6\">\n          <h3 className=\"text-center\">汪汪榜</h3>\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <h4 className=\"text-center\">一周</h4>\n              <RankingTable rows={data1w[modeId || \"0\"].top} />;\n            </div>\n            <div className=\"col-md-6\">\n              <h4 className=\"text-center\">四周</h4>\n              <RankingTable rows={data4w[modeId || \"0\"].top} />;\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\n\nimport DeltaRanking from \"./deltaRanking\";\nimport { Alert } from \"../misc/alert\";\n\nexport default function Routes() {\n  return (\n    <div>\n      <Alert stateName=\"rankingNotice\">\n        <h4 className=\"mb-2\">提示</h4>\n        排行榜非实时更新，可能会有数小时的延迟\n      </Alert>\n      <DeltaRanking />\n    </div>\n  );\n}\n"],"sourceRoot":""}