(this["webpackJsonpamae-koromo"]=this["webpackJsonpamae-koromo"]||[]).push([[2],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return g}));var r=n(3),a=n(34),i=n(1),c=n.n(i),o=n(0),u=n.n(o),s=n(4);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object.freeze({toPlain:function(e){return"player"===e.type?d({},e,{startDate:e.startDate?c()(e.startDate).valueOf():null,endDate:e.endDate?c()(e.endDate).valueOf():null}):d({},e,{type:void 0,date:e.date?c()(e.date).valueOf():null})},fromPlain:function(e){return"player"===e.type?e:void 0===e.type?{type:void 0,date:e.date||null,searchText:e.searchText||"",selectedMode:e.selectedMode}:(console.warn("Unknown model data from location state:",e),m)},removeExtraParams:function(e){return"player"===e.type?{type:"player",playerId:e.playerId,selectedMode:"",startDate:null,endDate:null,version:0}:{type:void 0,searchText:"",selectedMode:"",date:null,version:0}}}),m={type:void 0,date:null,selectedMode:"",searchText:""},v=u.a.createContext([d({},m,{version:0}),function(){}]),h=function(){return Object(o.useContext)(v)};function p(e,t){return e===t||!(!e||!t)&&c()(e).isSame(t,"day")}function g(e){var t=e.children,n=Object(s.h)(),a=Object(o.useReducer)((function(e,t){return function(e,t){if(e.type!==t.type)return!0;if(void 0!==t.selectedMode&&t.selectedMode!==e.selectedMode)return!0;if(void 0===e.type&&t.type===e.type){if(void 0!==t.date&&!p(t.date,e.date))return!0;if(void 0!==t.searchText&&t.searchText!==e.searchText)return!0}if("player"===e.type&&t.type===e.type){if(void 0!==t.playerId&&t.playerId!==e.playerId)return!0;if(void 0!==t.startDate&&!p(e.startDate,t.startDate))return!0;if(void 0!==t.endDate&&!p(e.endDate,t.endDate))return!0}return!1}(e,t)?d({},e.type===t.type?e:{},{},function(e){void 0===e.type&&e.date&&(e.date=c()(e.date).valueOf());for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];"type"!==r&&void 0===e[r]&&delete e[r]}return e}(t),{version:e.version+1,pendingRouteUpdate:!0}):e}),null,(function(){return d({},m,{},f.fromPlain((n.state||{}).model||{}),{version:(new Date).getTime()})})),i=Object(r.a)(a,2),l=i[0],h=i[1],g=Object(o.useMemo)((function(){return[l,h]}),[l,h]);return u.a.createElement(v.Provider,{value:g},t)}},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n.n(r),i=n(18),c=Object.freeze({getRankIndexByPlayer:function(e,t){var n=("object"===typeof t?t.accountId:t).toString(),r=e.players.map((function(e,t){return{player:e,index:t}}));r.sort((function(e,t){return 5-t.index+t.player.score-(5-e.index+e.player.score)}));for(var a=0;a<r.length;a++)if(r[a].player.accountId.toString()===n)return a;return-1},getPlayerRankLabel:function(e,t){return i.c[c.getRankIndexByPlayer(e,t)]||""},getPlayerRankColor:function(e,t){return i.b[c.getRankIndexByPlayer(e,t)]},encodeAccountId:function(e){return 1358437+(7*e+1117113^86216345)},getStartTime:function(e){return 1e3*("number"===typeof e?e:e.startTime)},formatFullStartTime:function(e){return a()(c.getStartTime(e)).format("YYYY/M/D HH:mm")},formatStartDate:function(e){return a()(c.getStartTime(e)).format("M/D")},getRecordLink:function(e,t){var n="object"===typeof t?t.accountId:t,r=n?"_a".concat(c.encodeAccountId("number"===typeof n?n:parseInt(n))):"",a="string"===typeof e?e:e.uuid;return"https://www.majsoul.com/1/?paipu=".concat(a).concat(r)}})},108:function(e,t){},117:function(e,t,n){e.exports=n(182)},122:function(e,t,n){},123:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}));var r="\u521d\u58eb\u6770\u8c6a\u5723\u9b42",a=["\u4e00\u4f4d","\u4e8c\u4f4d","\u4e09\u4f4d","\u56db\u4f4d"],i=["#28a745","#17a2b8","#6c757d","#dc3545"]},182:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(44),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(122),n(123);var u=n(15),s=n(4),l=n(29),d=n(85),f=function(e){var t=e.title,n=void 0===t?void 0:t,r=e.children,i=void 0===r?void 0:r,c=e.fluid,o=void 0!==c&&c;return a.a.createElement("div",{className:"my-5 container".concat(o?"-fluid":"")},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-sm-12"},n&&a.a.createElement("h2",{className:"mb-4"},n),i)))},m=n(52);function v(){return a.a.createElement(m.a,{container:f,stateName:"topNote"},a.a.createElement("h4",null,"\u8bf4\u660e"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u672c\u9875\u9762\u6570\u636e\u7531\u7b2c\u4e09\u65b9\u7ef4\u62a4\uff0c\u4e0d\u80fd\u7edd\u5bf9\u4fdd\u8bc1\u5b8c\u6574\u548c\u6b63\u786e\uff0c\u4fe1\u606f\u4ec5\u4f9b\u53c2\u8003\uff0c\u8bf7\u52ff\u7528\u4e8e\u4e0d\u826f\u7528\u9014\u3002"),a.a.createElement("li",null,"\u8bb0\u5f55\u5305\u542b\u96c0\u9b42\u56fd\u670d\u56db\u4eba\u534a\u5e84\u6bb5\u4f4d\u6218\u7389\u4e4b\u95f4\u53ca\u738b\u5ea7\u4e4b\u95f4\u7684\u724c\u8c31\u3002"),a.a.createElement("li",null,"\u5bf9\u5c40\u6570\u636e\u6536\u96c6\u4ece 2019 \u5e74 8 \u6708 23 \u65e5\u5f00\u59cb\uff0c\u4e4b\u524d\u7684\u5bf9\u5c40\u5df2\u65e0\u6cd5\u83b7\u53d6\u3002"),a.a.createElement("li",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\u5168\u90e8\u5bf9\u5c40\u90fd\u4f1a\u88ab\u8bb0\u5f55\uff0c\u4f46\u4e0d\u6392\u9664\u56e0\u7f51\u7edc\u95ee\u9898\u9057\u6f0f\u90e8\u5206\u5bf9\u5c40\u7684\u60c5\u51b5\u3002\u53e6 2019 \u5e74 10 \u6708 10 \u65e5\u524d\u56e0\u7a0b\u5e8f Bug \u6bcf\u5929\u665a\u95f4\u53ef\u80fd\u9057\u6f0f\u6389 10% ~ 20% \u7684\u5bf9\u5c40\uff0c\u6b64 Bug \u76ee\u524d\u5df2\u7ecf\u4fee\u590d\u3002"),a.a.createElement("li",null,"\u9875\u9762\u4e0d\u662f\u5b9e\u65f6\u66f4\u65b0\uff0c\u5bf9\u5c40\u4e00\u822c\u4f1a\u5728\u7ed3\u675f\u540e\u6570\u5206\u949f\u81f3\u6570\u5c0f\u65f6\u5185\u51fa\u73b0\u3002"),a.a.createElement("li",null,"\u5982\u6709\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u8bf7\u6233 ",a.a.createElement("a",{href:"mailto:i@sapika.ch"},"SAPikachu (i@sapika.ch)")," \u6216"," ",a.a.createElement("a",{href:"https://github.com/SAPikachu/amae-koromo/"},"\u63d0\u4ea4 Issue"),"\u3002")))}var h=n(43),p=n(23),g=n(3),b=n(7);function y(e){var t=e.children,n=Object(r.useState)(""),a=Object(g.a)(n,2),i=a[0],c=a[1];return Object(b.b)(c),i?r.createElement(m.a,{container:f,closable:!1},r.createElement("h4",null,"\u4e34\u65f6\u7ef4\u62a4\u516c\u544a"),r.createElement("p",null,i)):t}var k=n(53);function _(e,t){return!!e&&(!t.pathname.startsWith("/ranking")&&!t.pathname.startsWith("/statistics"))}function O(){var e=Object(r.useState)(!1),t=Object(g.a)(e,2),n=t[0],i=t[1],c=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),i(!n)}),[n,i]);return Object(r.useEffect)((function(){if(n){var e=function(e){e.target.classList.contains("navbar-toggler")||i(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[n,i]),a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top"},a.a.createElement("div",{className:"container"},a.a.createElement(u.b,{className:"navbar-brand",to:"/"},p.c),!k.b&&a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",onClick:c},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse justify-content-end ".concat(n?"":"d-none"," d-lg-block"),id:"navbarNavAltMarkup"},a.a.createElement("div",{className:"navbar-nav"},a.a.createElement(u.c,{className:"nav-item nav-link",activeClassName:"active",to:"/",isActive:_},"\u4e3b\u9875"),a.a.createElement(u.c,{className:"nav-item nav-link",activeClassName:"active",to:"/ranking"},"\u6392\u884c\u699c"),a.a.createElement(u.c,{className:"nav-item nav-link",activeClassName:"active",to:"/statistics"},"\u5927\u6570\u636e"))))))}var j=n(80);function E(){var e=Object(s.h)();return a.a.createElement(j.Helmet,null,a.a.createElement("link",{rel:"canonical",href:"https://".concat(p.a).concat(e.pathname)}))}var w=n(24),P=Object(l.a)({loader:function(){return Promise.resolve().then(n.t.bind(null,80,7))},loading:function(){return a.a.createElement(a.a.Fragment,null)}}),x=Object(l.a)({loader:function(){return n.e(7).then(n.bind(null,545))},loading:function(){return a.a.createElement(w.a,null)}}),M=Object(l.a)({loader:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,543))},loading:function(){return a.a.createElement(w.a,null)}});var C=function(){return a.a.createElement(u.a,null,a.a.createElement(P,{defaultTitle:p.c,titleTemplate:"%s | ".concat(p.c)}),a.a.createElement(E,null),a.a.createElement(O,null),a.a.createElement(y,null,a.a.createElement(d.a,null,a.a.createElement(v,null),a.a.createElement(f,null,a.a.createElement(s.d,null,a.a.createElement(s.b,{path:"/ranking"},a.a.createElement(x,null)),a.a.createElement(s.b,{path:"/statistics"},a.a.createElement(M,null)),a.a.createElement(s.b,{path:"/"},a.a.createElement(h.a,null)))))))},D=document.getElementById("root");Object(i.render)(r.createElement(C,null),D),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}}({onUpdate:function(e){var t=e.waiting||navigator.serviceWorker.controller;if(t){if("activated"===t.state)return void window.location.reload();t.addEventListener("statechange",(function(e){e.target&&"activated"===e.target.state&&window.location.reload()})),t.postMessage({type:"SKIP_WAITING"})}}})},23:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(1),a="\u96c0\u9b42\u724c\u8c31\u5c4b",i=n.n(r)()("2019-08-23","YYYY-MM-DD"),c="amae-koromo.sapk.ch"},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r);function i(e){var t=e.size,n=void 0===t?"normal":t;return a.a.createElement("div",{className:"d-flex justify-content-center m-".concat("normal"===n?5:1)},a.a.createElement("div",{className:"spinner-border ".concat("normal"===n?"":"spinner-border-sm"),role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))}},29:function(e,t,n){"use strict";var r=n(34),a=n(110),i=n.n(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=function(e){return i()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({delay:200},e))}},30:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e["\u738b\u5ea7"]=16]="\u738b\u5ea7",e[e["\u7389"]=12]="\u7389"}(r||(r={}));Object.keys(r).filter((function(e){return"number"===typeof r[e]})).length},31:function(e,t,n){"use strict";var r=n(0),a=n.n(r);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"checkbox",items:[],groupKey:"default",selectedItemKeys:null,onChange:function(){}},t=e.type,n=e.items,r=e.groupKey,i=function(){if("checkbox"===e.type){var t=e.selectedItemKeys,r=e.onChange;return{setSelected:function(e,a){if((!a||t&&!t.has(e))&&(a||!t||t.has(e))){var i=new Set(t||n.map((function(e){return e.key})));a?i.add(e):i.delete(e),r(i)}},isChecked:function(e){return!t||t.has(e)}}}var a=e.selectedItemKey,i=e.onChange;return{setSelected:function(e,t){t&&i(e)},isChecked:function(e){return a===e}}}(),c=i.setSelected,o=i.isChecked;return a.a.createElement(a.a.Fragment,null,n.map((function(e){return a.a.createElement("div",{className:"form-check form-check-inline",key:e.key},a.a.createElement("input",{className:"form-check-input",type:t,id:"CG_".concat(r,"_").concat(e.key),name:"CG_".concat(r,"_").concat(e.key),value:e.key,checked:o(e.key),onChange:function(t){return c(e.key,t.currentTarget.checked)}}),a.a.createElement("label",{className:"form-check-label",htmlFor:"CG_".concat(r,"_").concat(e.key)},e.label))})))}var c=n(1),o=n.n(c);function u(e){var t=e.date,n=void 0===t?o()():t,i=e.onChange,c=void 0===i?function(){}:i,u=e.className,s=void 0===u?"":u,l=e.min,d=void 0===l?0:l,f=e.max,m=void 0===f?o()():f,v=Object(r.useCallback)((function(e){return c(o()(e.currentTarget.value,"YYYY-MM-DD"))}),[c]);return a.a.createElement("input",{className:s,type:"date",value:o()(n).format("YYYY-MM-DD"),min:d?o()(d).format("YYYY-MM-DD"):void 0,max:m?o()(m).format("YYYY-MM-DD"):void 0,onChange:v})}var s=n(81);n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s.a}))},33:function(e,t,n){"use strict";var r=n(18);n.d(t,"RANK_COLORS",(function(){return r.b})),n.d(t,"RANK_LABELS",(function(){return r.c}));var a=n(30);n.d(t,"GameMode",(function(){return a.a}));var i=n(42);n.d(t,"Level",(function(){return i.a})),n.d(t,"LevelWithDelta",(function(){return i.b})),n.d(t,"getLevelTag",(function(){return i.c}));var c=n(82);n.d(t,"PlayerMetadata",(function(){return c.a}));var o=n(107);n.d(t,"GameRecord",(function(){return o.a}));var u=n(83);n.d(t,"CareerRankingType",(function(){return u.a}));n(108)},37:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return v}));var r=n(3),a=n(0);function i(){requestAnimationFrame((function(){return window.dispatchEvent(new UIEvent("resize"))})),setTimeout((function(){window.dispatchEvent(new UIEvent("resize"))}),200)}function c(){window.scrollTo(0,0),requestAnimationFrame((function(){return window.scrollTo(0,0)}))}var o=function(e){return e?e<1e-4?"<0.01%":"".concat((100*e).toFixed(2),"%"):""},u=function(e){return e.toFixed(3)},s=function(e){return e.toString()},l={notFinished:"yes"},d={};function f(e,t){t&&d[t]&&(e=d[t]);var n=Object(a.useState)(e instanceof Promise?l:e),i=Object(r.a)(n,2),c=i[0],o=i[1];if(Object(a.useEffect)((function(){var n=!1;return e instanceof Promise?(o(l),e.then((function(e){n||(t&&(d[t]=e),o(e))}))):o(e),function(){n=!0}}),[e,t]),c!==l)return c}function m(e,t,n){return f(Object(a.useMemo)(e,t),n?"".concat(n,"-").concat(t.join(",")):void 0)}function v(e){return e.reduce((function(e,t){return e+t}),0)}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(16),a=n(17),i=n(30),c=n(18),o=[20,80,200,600,800,1e3,1200,1400,2e3,2800,3200,3600,4e3,6e3,9e3],u=[0,0,0,20,40,60,80,100,120,165,180,195,210,225,240,255],s={1:[],2:[],3:[],4:[i.a.\u7389],5:[i.a.\u7389,i.a.\u738b\u5ea7],6:[i.a.\u738b\u5ea7]},l=function(){function e(t){Object(r.a)(this,e),this._majorRank=void 0,this._minorRank=void 0;var n=t%1e4;this._majorRank=Math.floor(n/100),this._minorRank=n%100}return Object(a.a)(e,[{key:"isSameMajorRank",value:function(e){return this._majorRank===e._majorRank}},{key:"isSame",value:function(e){return this._majorRank===e._majorRank&&this._minorRank===e._minorRank}},{key:"isAllowedMode",value:function(e){return s[this._majorRank.toString()].includes(e)}},{key:"getTag",value:function(){var e=c.a[this._majorRank-1];return this._majorRank===c.a.length?e:e+this._minorRank}},{key:"getMaxPoint",value:function(){return o[3*(this._majorRank-1)+this._minorRank-1]}},{key:"getPenaltyPoint",value:function(){return u[3*(this._majorRank-1)+this._minorRank-1]}},{key:"getStartingPoint",value:function(){return 1===this._majorRank?0:this._majorRank===c.a.length?1e4:this.getMaxPoint()/2}},{key:"getNextLevel",value:function(){if(this._majorRank===c.a.length)return this;var t=this._majorRank,n=this._minorRank+1;return n>3&&(t++,n=1),new e(100*t+n)}},{key:"getPreviousLevel",value:function(){if(1===this._majorRank&&1===this._minorRank)return this;var t=this._majorRank,n=this._minorRank-1;return n<1&&(t--,n=3),new e(100*t+n)}},{key:"getAdjustedLevel",value:function(e){var t=this.getMaxPoint(),n=this;return t&&e>=t?(t=(n=this.getNextLevel()).getMaxPoint(),e=n.getStartingPoint()):e<0&&(!t||1===n._majorRank||2===n._majorRank&&1===n._minorRank?e=0:(t=(n=this.getPreviousLevel()).getMaxPoint(),e=n.getStartingPoint())),n}},{key:"formatAdjustedScoreWithTag",value:function(e){var t=this.getAdjustedLevel(e);return"".concat(t.getTag()," - ").concat(this.formatAdjustedScore(e))}},{key:"formatAdjustedScore",value:function(e){var t=this.getAdjustedLevel(e);return"".concat(t===this?Math.max(e,0):t.getStartingPoint()).concat(t.getMaxPoint()?"/"+t.getMaxPoint():"")}}]),e}();function d(e){return new l(e).getTag()}var f=Object.freeze({format:function(e){return new l(e.id).formatAdjustedScoreWithTag(e.score+e.delta)},formatAdjustedScore:function(e){return new l(e.id).formatAdjustedScore(e.score+e.delta)},getTag:function(e){return f.getAdjustedLevel(e).getTag()},getAdjustedLevel:function(e){return new l(e.id).getAdjustedLevel(e.score+e.delta)}})},43:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(4),c=n(10),o=n(1),u=n.n(o),s=n(34),l=n(3),d=n(37);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t){return e?u()(e,"YYYY-MM-DD"):t}var v={player:function(e){return{type:"player",playerId:e.id,startDate:m(e.startDate,null),endDate:m(e.endDate,null),selectedMode:e.mode||"",version:0}},listing:function(e){var t=m(e.date,null);return t&&!t.isValid()?"/":{type:void 0,date:t?t.startOf("day").valueOf():null,selectedMode:e.mode||"",searchText:e.search||"",version:0}}};function h(e){var t=e.view,n=Object(i.i)(),o=Object(c.c)(),u=Object(l.a)(o,2),m=u[0],h=u[1],p=Object(i.h)();Object(r.useEffect)(d.f,[m.type]);var g=p.state;if(g&&g.model.version===m.version)return delete m.pendingRouteUpdate,p.pathname!==g.pathname?a.a.createElement(i.a,{to:{pathname:g.pathname,state:g}}):a.a.createElement(a.a.Fragment,null);if(!g){var b=v[t](n);if("string"===typeof b)return a.a.createElement(i.a,{to:b});var y=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b,{version:m.version});return h(y),Object(d.d)(),a.a.createElement(i.a,{to:{pathname:p.pathname,state:{pathname:p.pathname,model:c.a.toPlain(y)}}})}if(m.pendingRouteUpdate){var k=Y(m);return delete m.pendingRouteUpdate,a.a.createElement(i.a,{to:{pathname:k,state:{pathname:k,model:c.a.toPlain(m)}}})}return h(c.a.fromPlain(g.model)),a.a.createElement(a.a.Fragment,null)}var p=n(84),g=n(31),b=n(23),y=n(79),k=u()().startOf("day");function _(e){var t=e.className,n=void 0===t?"":t,i=Object(c.c)(),o=Object(l.a)(i,2),u=o[0],s=o[1],d=Object(r.useCallback)((function(e){return s({searchText:e.currentTarget.value})}),[s]),f=Object(r.useCallback)((function(e){return s({selectedMode:e})}),[s]),m=Object(r.useCallback)((function(e){return s({date:e})}),[s]);return void 0!==u.type?null:a.a.createElement("div",{className:n},a.a.createElement(g.c,{title:"\u65e5\u671f"},a.a.createElement(g.b,{min:b.b,date:u.date||k,onChange:m,className:"form-control"})),a.a.createElement(g.c,{title:"\u67e5\u627e\u73a9\u5bb6"},a.a.createElement("input",{type:"text",className:"form-control",value:u.searchText,onChange:d})),a.a.createElement(g.c,null,a.a.createElement(y.a,{mode:u.selectedMode,onChange:f})))}var O=n(29),j=n(24),E=n(33),w=n(75),P=n(15),x={},M=6,C=20,D=function(e){return e.toLowerCase().trim()};function S(e){var t=e.searchText,n=Object(r.useState)(0),i=Object(l.a)(n,2),c=i[0],o=i[1],u=Object(r.useMemo)((function(){var e=function(e){var t=D(e);for(e=t;e;){var n=x[e];if(n&&!(n instanceof Promise))return{isExactMatch:e===t,result:n};e=e.slice(0,e.length-1)}return null}(t);if(!e)return[[],!0];if(e.isExactMatch)return[e.result,!1];var n=D(t),r=e.result.length>=C,a=[];return e.result.forEach((function(e){D(e.nickname).startsWith(n)?a.push(e):a.length&&(r=!1)})),[a,r&&a.length<M,r]}),[t,c]),s=Object(l.a)(u,3),d=s[0],f=s[1],m=s[2];return Object(r.useEffect)((function(){var e=D(t);if(!x[e]&&f){var n=!1,r=setTimeout((function(){r=void 0,n||x[e]||(x[e]=Object(w.f)(e).then((function(t){return x[e]=t,n||o((new Date).getTime()),t})))}),500);return function(){n=!0,r&&clearTimeout(r)}}}),[t,f]),a.a.createElement(a.a.Fragment,null,a.a.createElement("h6",{className:"text-center mb-2"},"\u73a9\u5bb6\u524d\u7f00\u641c\u7d22"),a.a.createElement("ul",{className:"list-unstyled row mb-2"},d.slice(0,M).map((function(e){return a.a.createElement("li",{key:e.id,className:"col-6"},a.a.createElement(P.b,{to:A(e.id)},a.a.createElement("span",null,"[",Object(E.getLevelTag)(e.level.id),"] ",e.nickname)))}))),f&&a.a.createElement(j.a,{size:"small"})||(d.length>M||m)&&a.a.createElement("small",{className:"d-block text-center text-muted"},"\uff08\u8f93\u5165\u66f4\u957f\u540d\u5b57\u663e\u793a\u5176\u5b83\u7ed3\u679c\uff09"))}function R(e){var t=e.className,n=void 0===t?"":t,r=Object(c.c)(),i=Object(l.a)(r,1)[0];return"playerId"in i||!i.searchText?a.a.createElement(a.a.Fragment,null):a.a.createElement("div",{className:n},a.a.createElement(S,{searchText:i.searchText}))}n.d(t,"b",(function(){return Y})),n.d(t,"c",(function(){return A}));var I=Object(O.a)({loader:function(){return n.e(11).then(n.bind(null,544))},loading:function(){return a.a.createElement(j.a,null)}}),N=Object(O.a)({loader:function(){return Promise.all([n.e(1),n.e(6),n.e(9)]).then(n.bind(null,539))},loading:function(){return a.a.createElement(j.a,null)}}),T="/player/:id/:mode([0-9]+)?/:startDate(\\d{4}-\\d{2}-\\d{2})?/:endDate(\\d{4}-\\d{2}-\\d{2})?",L="/:date(\\d{4}-\\d{2}-\\d{2})/:mode([0-9]+)?/:search?";function Y(e){return"player"===e.type?Object(i.f)(T,{id:e.playerId,startDate:e.startDate?u()(e.startDate).format("YYYY-MM-DD"):void 0,endDate:e.endDate?u()(e.endDate).format("YYYY-MM-DD"):void 0,mode:e.selectedMode||void 0}):e.selectedMode||e.searchText||e.date?Object(i.f)(L,{date:u()(e.date||new Date).format("YYYY-MM-DD"),mode:e.selectedMode||void 0,search:e.searchText||void 0}):"/"}function A(e){return Y({type:"player",playerId:e.toString(),startDate:null,endDate:null,selectedMode:"",version:0})}t.a=function(){return a.a.createElement(c.b,null,a.a.createElement(p.a,null,a.a.createElement(i.d,null,a.a.createElement(i.b,{exact:!0,path:T},a.a.createElement(h,{view:"player"}),a.a.createElement(I,null),a.a.createElement(N,{showFullTime:!0,showStartEnd:!1})),a.a.createElement(i.b,{exact:!0,path:["/",L]},a.a.createElement(h,{view:"listing"}),a.a.createElement("div",{className:"row"},a.a.createElement(_,{className:"col"}),a.a.createElement(R,{className:"col-12 col-sm-6 col-md-4"})),a.a.createElement(N,null)),a.a.createElement(i.b,null,a.a.createElement(i.a,{to:"/"})))))}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n(0),i=n.n(a),c=n(37);function o(e){var t=e.className,n=void 0===t?"":t,o=e.type,u=void 0===o?"info":o,s=e.container,l=void 0===s?i.a.Fragment:s,d=e.stateName,f=void 0===d?"":d,m=e.closable,v=void 0===m||m,h=e.children,p=void 0===h?void 0:h,g="alertState_".concat(f),b=Object(a.useState)((function(){return f&&!!localStorage.getItem(g)})),y=Object(r.a)(b,2),k=y[0],_=y[1];if(Object(a.useEffect)((function(){f&&k&&localStorage.setItem(g,"true")}),[k,f,g]),k&&v)return null;var O=l;return i.a.createElement(O,null,i.a.createElement("div",{className:"alert alert-".concat(u," alert-dismissible fade show ").concat(n),role:"alert"},p,v&&i.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(e){e.preventDefault(),_(!0),Object(c.f)()}},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))}},53:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r="".concat("https://ak-data-2.sapk.ch/","api/"),a=("".concat("https://ak-data-2.sapk.ch/","api-test/"),""),i=/^([^.]+)\.contest\./.exec(window.location.hostname);i&&(a="contest/".concat(i[1],"/"));var c=0===a.indexOf("contest/"),o=r+a},7:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),i=n(5),c=n(53),o=function(){};function u(e){o=e}function s(e){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(c.a+t);case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:if(!(r=e.sent).maintenance){e.next=11;break}return o(r.maintenance),e.abrupt("return",new Promise((function(){})));case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},75:function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return b}));var r=n(3),a=n(2),i=n.n(a),c=n(5),o=(n(1),n(7));function u(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(i.a.mark((function e(t){var n,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:20,t=t.trim()){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",Object(o.a)("search_player/".concat(encodeURIComponent(t),"?limit=").concat(n)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("player_delta_ranking/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("career_ranking/".concat(t,"?mode=").concat(n||""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("global_statistics");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("fan_stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(i.a.mark((function e(){var t,n,a,c,u,s,l,d,f,m,v,h,p,g,b,y,k,_,O,j,E,w,P,x,M,C,D,S;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("rank_rate_by_seat");case 2:for(t=e.sent,n={},a=!0,c=!1,u=void 0,e.prev=7,s=t[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)d=l.value,f=Object(r.a)(d,2),m=Object(r.a)(f[0],2),v=m[0],h=m[1],p=f[1],g=v.toString(),n[g]=n[g]||[],n[g][h]=n[g][h]||0,n[g][h]+=p;e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),c=!0,u=e.t0;case 15:e.prev=15,e.prev=16,a||null==s.return||s.return();case 18:if(e.prev=18,!c){e.next=21;break}throw u;case 21:return e.finish(18);case 22:return e.finish(15);case 23:for(b={},y=!0,k=!1,_=void 0,e.prev=27,O=t[Symbol.iterator]();!(y=(j=O.next()).done);y=!0)E=j.value,w=Object(r.a)(E,2),P=Object(r.a)(w[0],3),x=P[0],M=P[1],C=P[2],D=w[1],S=x.toString(),b[S]=b[S]||[],b[S].numGames=n[S][M],b[S][M]=b[S][M]||[0,0,0,0],b[S][M][C]=D/n[S][M];e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),k=!0,_=e.t1;case 35:e.prev=35,e.prev=36,y||null==O.return||O.return();case 38:if(e.prev=38,!k){e.next=41;break}throw _;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return e.abrupt("return",b);case 44:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22],[27,31,35,43],[36,,38,42]])})))).apply(this,arguments)}},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),i=n(31),c=n(33),o=Object.keys(c.GameMode).filter((function(e){return"string"!==typeof c.GameMode[e]})).map((function(e){return{key:String(c.GameMode[e]),label:e}}));function u(e){var t=e.mode,n=e.onChange;return a.a.createElement(i.a,{type:"radio",groupKey:"ModeSelector",items:o,selectedItemKey:t||"",onChange:n})}o.unshift({key:"",label:"\u5168\u90e8"})},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),i=function(e){var t=e.title,n=void 0===t?"":t,r=e.inline,i=void 0!==r&&r,c=e.children,o=void 0===c?void 0:c;return a.a.createElement("div",{className:"form-group row"},a.a.createElement("label",{className:"col-".concat(i?"lg":"md","-2 col-form-label")},n),a.a.createElement("div",{className:"col-".concat(i?"lg":"md","-10 ").concat(i?"form-inline":"")},o))}},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(42),a=[15,5,-5,-15],i={12:[110,55,0,0],16:[120,60,0,0]};function c(e,t,n,r){var c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=(!(arguments.length>5&&void 0!==arguments[5])||arguments[5]?Math.ceil:function(e){return e})((e-25e3)/1e3+a[t])+i[n.toString()][t];return 3===t&&c&&(o-=r.getPenaltyPoint()),o}var o=Object.freeze({calculateRankDeltaPoints:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e.rank_avg_score.map((function(o,u){return c(o,u,t,n||r.b.getAdjustedLevel(e.level),a,i)}));return o},calculateExpectedGamePoint:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=o.calculateRankDeltaPoints(e,t,n,r),i=a.map((function(t,n){return t*e.rank_rates[n]})),c=i.reduce((function(e,t){return e+t}),0);return c},estimateStableLevel:function(e,t){for(var n=new r.a(e.level.id),a=void 0;;){var i=o.calculateExpectedGamePoint(e,t,n);if(Math.abs(i)<.001)return n.getTag();if(!(i>=0)){if(a)return a.getTag();break}if(a=n,!(n=n.getNextLevel()).isAllowedMode(t))return a.getTag()+"+";if(n===a)return n.getTag()+"+"}if(!n.getMaxPoint())return n.getTag()+"-";for(;;){var c=n.getPreviousLevel();if(!c.isAllowedMode(t)||c===n)return n.getTag()+"-";if(n=c,o.calculateExpectedGamePoint(e,t,n)+.001>=0)return n.getTag()}},formatStableLevel2:function(e){var t=function(e){var t=e.toString();return-1===t.indexOf(".")&&(t+=".00"),t.length<8&&(t+="00"),t.slice(0,t.indexOf(".")+3)};return e>=7?"\u9b42".concat(t(e-6)):e>=4?"\u5723".concat(t(e-3)):"\u8c6a".concat(t(e))},getStableLevelComponents:function(e,t){return this.calculateRankDeltaPoints(e,t,void 0,!1,!1)},estimateStableLevel2:function(e,t){if(!e.rank_rates[3])return"";var n=this.calculateExpectedGamePoint(e,t,void 0,!1)/(15*e.rank_rates[3])-10;return o.formatStableLevel2(n)}})},83:function(e,t,n){"use strict";var r,a;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),function(e){e.OneWeek="1w",e.FourWeeks="4w"}(r||(r={})),function(e){e.Rank1="rank1",e.Rank12="rank12",e.Rank123="rank123",e.Rank4="rank4",e.AvgRank="avg_rank",e.NumGames="num_games",e.StableLevel="stable_level"}(a||(a={}))},84:function(e,t,n){"use strict";var r=n(3),a=n(16),i=n(17),c=n(0),o=n.n(c),u=n(1),s=n.n(u),l=n(2),d=n.n(l),f=n(5),m=n(7),v=function(){function e(t){Object(a.a)(this,e),this._date=void 0,this._date=s()(t).startOf("day")}return Object(i.a)(e,[{key:"getMetadata",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)("count/".concat(this._date.valueOf()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:"",e.next=3,Object(m.a)("games/".concat(this._date.valueOf(),"?skip=").concat(t,"&limit=").concat(n,"&tag=").concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),h=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(a.a)(this,e),this._playerId=void 0,this._startDate=void 0,this._endDate=void 0,this._mode=void 0,this._playerId=t,this._startDate=n,this._endDate=r,this._mode=i}return Object(i.a)(e,[{key:"_getDatePath",value:function(){var e="";return this._startDate&&(e+="/".concat(this._startDate.valueOf()),this._endDate&&(e+="/".concat(this._endDate.valueOf()))),e}},{key:"_getParams",value:function(){return"".concat(this._playerId).concat(this._getDatePath(),"?mode=").concat(this._mode)}},{key:"getMetadata",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)("player_stats/".concat(this._getParams())).then((function(e){return e.extended_stats=Object(m.a)("player_extended_stats/".concat(t._getParams())).then((function(t){return e.extended_stats=t})),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:"",e.next=3,Object(m.a)("player_records/".concat(this._playerId).concat(this._getDatePath(),"?skip=").concat(t,"&limit=").concat(n,"&mode=").concat(this._mode,"&tag=").concat(r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;Object(a.a)(this,e),this._loader=void 0,this._metadata=void 0,this._countPromise=void 0,this._chunks=void 0,this._itemsPerChunk=void 0,this._filterPredicate=void 0,this._filteredIndices=void 0,this._filterResultCache=void 0,this._loader=t,this._metadata=null,this._countPromise=null,this._chunks=[],this._itemsPerChunk=n,this._filterPredicate=null,this._filteredIndices=null,this._filterResultCache={}}return Object(i.a)(e,[{key:"setFilterPredicate",value:function(e){this._filterPredicate!==e&&(this._filterPredicate=e,this._filterResultCache={},this.updateFilteredIndices())}},{key:"updateFilteredIndices",value:function(){if(this._filteredIndices=null,this._filterPredicate){var e=this.getMetadataSync();if(e){for(var t=e.count,n=0,r=0,a=[],i=0;i<t;i++){var c=this._chunks[Math.floor(i/this._itemsPerChunk)];if(!c||c instanceof Promise)a.push(i);else{r++;var o=c[i%this._itemsPerChunk],u=this._filterResultCache[o.uuid];void 0===u&&(this._filterResultCache[o.uuid]=u=this._filterPredicate(o)),u&&(a.push(i),n++)}}this._filteredIndices=a,n<10&&r>=this._itemsPerChunk&&this._triggerFullLoad()}}}},{key:"getMetadataSync",value:function(){return!this._metadata||this._metadata instanceof Promise?null:this._metadata}},{key:"getCountMaybeSync",value:function(){var e=this.getMetadataSync();return e?this._filteredIndices?this._filteredIndices.length:e.count:this.getCount()}},{key:"getCount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getMetadataSync()){e.next=3;break}return e.abrupt("return",this.getCountMaybeSync());case 3:if(this._metadata||(this._metadata=this._loader.getMetadata().then((function(e){if(!e)throw console.log("No metadata returned"),new Error("No metadata returned");return t._metadata=e,t.updateFilteredIndices(),t._countPromise=null,e}))),!this._countPromise){e.next=6;break}return e.abrupt("return",this._countPromise);case 6:return this._countPromise=Promise.resolve(this._metadata).then((function(){return new Promise((function(e){return setTimeout(e,100)}))})).then((function(){return t.getCountMaybeSync()})),e.abrupt("return",this._countPromise);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUnfilteredCountSync",value:function(){var e=this.getMetadataSync();return e?e.count:null}},{key:"isItemLoaded",value:function(e){var t=this._mapItemIndex(e);if(null===t)return!1;var n=Math.floor(t/this._itemsPerChunk);return!!this._chunks[n]&&!(this._chunks[n]instanceof Promise)}},{key:"getItem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._mapItemIndex(e);if(null===r)return this.getCount().then((function(n){return e>n-1||null===t._mapItemIndex(e)?null:t.getItem(e)}));var a=Math.floor(r/this._itemsPerChunk),i=r%this._itemsPerChunk,c=this._chunks[a];return!c||c instanceof Promise?this._getChunk(a).then((function(e){return e[i]})):(n||this._filteredIndices||this.preload(e+this._itemsPerChunk),c[i])}},{key:"preload",value:function(e){var t=this.getCountMaybeSync();t instanceof Promise||e>=t||this.getItem(e,!0)}},{key:"_mapItemIndex",value:function(e){var t=this.getCountMaybeSync();if(t instanceof Promise)return null;if(e<0)return null;var n=t-e-1;return n<0?null:this._filteredIndices?this._filteredIndices[n]:n}},{key:"_getChunk",value:function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._chunks[t]||(this._chunks[t]=this._loadChunk(t)),e.abrupt("return",this._chunks[t]);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_triggerFullLoad",value:function(){var e=this.getCountMaybeSync();if("number"===typeof e)for(var t=Math.ceil(e/this._itemsPerChunk),n=0;n<t;n++)this._chunks[n]||this._getChunk(n)}},{key:"_loadChunk",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCount();case 2:if(n=e.sent,r=Math.ceil(n/this._itemsPerChunk)){e.next=6;break}return e.abrupt("return",[]);case 6:if(!(t>=r)){e.next=9;break}return console.warn("Loading out-of-index chunk: ".concat(t,", number of items: ").concat(n)),e.abrupt("return",[]);case 9:return e.next=11,this._loader.getRecords(this._itemsPerChunk*t,this._itemsPerChunk,t===r-1?n.toString():"");case 11:return(a=e.sent).length<this._itemsPerChunk&&t<r-1&&console.warn("Unexpected number of items in chunk:",a.length),this._chunks[t]=a,this.updateFilteredIndices(),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=Object.freeze({create:function(e){return new p(new v(e))}}),b=Object.freeze({create:function(e,t,n,r){return new p(new h(e,t?s()(t).startOf("day"):void 0,n?s()(n).endOf("day"):void 0,r))}}),y=n(10),k=n(43);n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return x}));var _={loading:!0},O=new(function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"getCount",value:function(){return 0}},{key:"getUnfilteredCount",value:function(){return 0}},{key:"getMetadata",value:function(){return null}},{key:"getItem",value:function(){return _}},{key:"isItemLoaded",value:function(){return!1}}]),e}()),j=function(){},E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;Object(a.a)(this,e),this._provider=void 0,this._onDataUpdate=void 0,this._triggeredRequest=void 0,this._provider=t,this._onDataUpdate=n,this._triggeredRequest=!1}return Object(i.a)(e,[{key:"_installHook",value:function(e){var t=this;this._triggeredRequest||(this._triggeredRequest=!0,e.then((function(){return t._callHook(!1)})).catch((function(){return t._callHook(!0)})))}},{key:"_callHook",value:function(e){this._onDataUpdate(e)}},{key:"getCount",value:function(){var e=this._provider.getCountMaybeSync();return e instanceof Promise?(this._installHook(e),0):e}},{key:"getUnfilteredCount",value:function(){return this._provider.getUnfilteredCountSync()||0}},{key:"getMetadata",value:function(){return this._provider.getMetadataSync()}},{key:"getItem",value:function(e){return e>=this.getCount()?_:this._provider.isItemLoaded(e)?this._provider.getItem(e):(this._triggeredRequest||this._installHook(this._provider.getItem(e)),_)}},{key:"isItemLoaded",value:function(e){return!(e<0)&&this._provider.isItemLoaded(e)}},{key:"setUpdateHook",value:function(e){this._onDataUpdate=e}},{key:"cancelUpdateHook",value:function(){this._onDataUpdate=j}}]),e}(),w=o.a.createContext(O),P=function(){return Object(c.useContext)(w)};w.Consumer;function x(e){var t=e.children,n=Object(y.c)(),a=Object(r.a)(n,2),i=a[0],u=a[1],l=Object(c.useState)((function(){return{}})),d=Object(r.a)(l,1)[0],f=function(e){var t=function(){return null},n=[null,""];if(void 0===e.type){var r=(e.searchText||"").trim()||"",a=r||e.selectedMode;t=function(){return a?function(t){return(!e.selectedMode||e.selectedMode===t.modeId.toString())&&!!t.players.some((function(e){return e.nickname.toLowerCase().indexOf(r)>-1}))}:null},n=[void 0===e.type&&e.selectedMode||null,r]}return Object(c.useMemo)(t,n)}(i),m=Object(c.useMemo)((function(){var e=function(e){if(void 0===e.type)return s()(e.date||s()()).startOf("day").valueOf().toString();if("player"===e.type)return Object(k.b)(e);throw new Error("Unknown model type")}(i);return d[e]||(d[e]=function(e){if(void 0===e.type)return g.create(e.date||s()().startOf("day"));if("player"===e.type)return b.create(e.playerId,e.startDate,e.endDate,e.selectedMode);throw new Error("Not implemented")}(i)),d[e]}),[i,d]),v=Object(c.useState)((function(){return O})),h=Object(r.a)(v,2),p=h[0],_=h[1],j=Object(c.useCallback)((function(e){if(e)u(y.a.removeExtraParams(i));else{m.setFilterPredicate(f);var t=new E(m);_(t)}}),[m,f,i,u]);return Object(c.useEffect)(j,[j]),Object(c.useEffect)((function(){var e=p;if(e instanceof E)return function(){return e.cancelUpdateHook()}}),[p]),Object(c.useEffect)((function(){p instanceof E&&p.setUpdateHook(j)}),[p,j]),Object(c.useEffect)((function(){m.getCountMaybeSync()}),[m]),o.a.createElement(w.Provider,{value:p},t)}},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(0),a=n.n(r),i=n(114),c=a.a.createContext({}),o=function(){return Object(r.useContext)(c)};t.a=function(e){var t=e.children;return a.a.createElement(i.a,null,(function(e){return a.a.createElement(c.Provider,{value:e},t)}))}}},[[117,3,4]]]);
//# sourceMappingURL=main.d291f121.chunk.js.map