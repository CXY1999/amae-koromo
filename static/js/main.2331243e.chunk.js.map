{"version":3,"sources":["components/misc/scroller.tsx","components/layout/container.tsx","components/misc/alert.tsx","utils/index.ts","utils/constants.ts","components/app/appHeader.tsx","components/app/index.tsx","index.tsx"],"names":["ScrollerContext","React","createContext","Scroller","_ref","children","react_default","a","createElement","WindowScroller","scrollerProps","Provider","value","Container","_ref$title","title","undefined","_ref$children","_ref$fluid","fluid","className","concat","Alert","_ref$className","_ref$type","type","_ref$container","container","Fragment","_ref$stateName","stateName","stateKey","_useState","useState","localStorage","getItem","_useState2","Object","slicedToArray","closed","setClosed","useEffect","setItem","Cont","role","data-dismiss","aria-label","onClick","event","preventDefault","requestAnimationFrame","window","dispatchEvent","UIEvent","setTimeout","aria-hidden","TITLE_PREFIX","dayjs","AppHeader","container_Container","react_router_dom","to","href","Helmet","Loadable","loader","__webpack_require__","e","then","t","bind","loading","App","scroller","rootElement","document","getElementById","render","react","app"],"mappings":"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","file":"static/js/main.2331243e.chunk.js","sourcesContent":["import React, { ReactChild, useContext } from \"react\";\r\n\r\nimport { WindowScrollerChildProps } from \"react-virtualized\";\r\nimport { WindowScroller } from \"react-virtualized/dist/es/WindowScroller\";\r\n\r\nconst ScrollerContext = React.createContext<WindowScrollerChildProps>({} as any);\r\n\r\nexport const useScrollerProps = () => useContext(ScrollerContext);\r\n\r\nfunction Scroller({ children }: { children: ReactChild | ReactChild[] }) {\r\n  return (\r\n    <WindowScroller>\r\n      {scrollerProps => <ScrollerContext.Provider value={scrollerProps}>{children}</ScrollerContext.Provider>}\r\n    </WindowScroller>\r\n  );\r\n}\r\nexport default Scroller;\r\n","import React, { ReactNode } from \"react\";\r\n\r\nexport const Container = ({ title = undefined, children = undefined as ReactNode, fluid = false }) => (\r\n  <div className={`my-5 container${fluid ? \"-fluid\" : \"\"}`}>\r\n    <div className=\"row\">\r\n      <div className=\"col-sm-12\">\r\n        {title && <h2 className=\"mb-4\">{title}</h2>}\r\n        {children}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n","import { useState, useEffect, ReactNode } from \"react\";\r\nimport React from \"react\";\r\nimport { ReactComponentLike } from \"prop-types\";\r\nimport { triggerRelayout } from '../../utils/index';\r\n\r\nexport function Alert({\r\n  className = \"\",\r\n  type = \"info\",\r\n  container = React.Fragment as ReactComponentLike,\r\n  stateName = \"\",\r\n  children = undefined as ReactNode\r\n}) {\r\n  const stateKey = `alertState_${stateName}`;\r\n  const [closed, setClosed] = useState(\r\n    () => stateName && !!localStorage.getItem(stateKey)\r\n  );\r\n  useEffect(() => {\r\n    if (stateName && closed) {\r\n      localStorage.setItem(stateKey, \"true\");\r\n    }\r\n  }, [closed, stateName, stateKey]);\r\n  if (closed) {\r\n    return null;\r\n  }\r\n  const Cont = container;\r\n  return (\r\n    <Cont>\r\n      <div\r\n        className={`alert alert-${type} alert-dismissible fade show ${className}`}\r\n        role=\"alert\"\r\n      >\r\n        {children}\r\n        <button\r\n          type=\"button\"\r\n          className=\"close\"\r\n          data-dismiss=\"alert\"\r\n          aria-label=\"Close\"\r\n          onClick={event => {\r\n            event.preventDefault();\r\n            setClosed(true);\r\n            triggerRelayout();\r\n          }}\r\n        >\r\n          <span aria-hidden=\"true\">×</span>\r\n        </button>\r\n      </div>\r\n    </Cont>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nexport function triggerRelayout() {\r\n  requestAnimationFrame(() => window.dispatchEvent(new UIEvent(\"resize\")));\r\n  setTimeout(function() {\r\n    window.dispatchEvent(new UIEvent(\"resize\"));\r\n  }, 200);\r\n}\r\nexport function scrollToTop() {\r\n  window.scrollTo(0, 0);\r\n  requestAnimationFrame(() => window.scrollTo(0, 0));\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport const formatPercent = (x: any) => (x > 0 ? `${(x * 100).toFixed(2)}%` : \"\");\r\n\r\ntype NotFinished = { notFinished: string };\r\nconst NOT_FINISHED = { notFinished: \"yes\" };\r\n\r\nexport function useAsync<T>(maybePromise: T | Promise<T>): T | undefined {\r\n  const [fulfilledValue, setFulfilledValue] = useState<T | NotFinished>(NOT_FINISHED);\r\n  useEffect(() => {\r\n    if (maybePromise instanceof Promise) {\r\n      setFulfilledValue(NOT_FINISHED);\r\n      maybePromise.then(result => setFulfilledValue(result));\r\n    } else {\r\n      setFulfilledValue(maybePromise);\r\n    }\r\n  }, [maybePromise]);\r\n  if (fulfilledValue !== NOT_FINISHED) {\r\n    return fulfilledValue as T;\r\n  }\r\n  return undefined;\r\n}\r\n","import dayjs from \"dayjs\";\r\n\r\nexport const DATA_ROOT = \"https://ak-data-1.sapk.ch/\";\r\nexport const API_ROOT = `${DATA_ROOT}api/`;\r\nexport const TITLE_PREFIX = \"雀魂牌谱屋\";\r\nexport const DATE_MIN = dayjs(\"2019-08-23\", \"YYYY-MM-DD\");\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Container } from \"../layout\";\r\nimport { Alert } from \"../misc/alert\";\r\nimport { TITLE_PREFIX } from \"../../utils/constants\";\r\n\r\nexport function AppHeader() {\r\n  return (\r\n    <React.Fragment>\r\n      <Container>\r\n        <h1>\r\n          <Link to=\"/\">{TITLE_PREFIX}</Link>\r\n        </h1>\r\n      </Container>\r\n      <Alert container={Container} stateName=\"topNote\">\r\n        <h4>说明</h4>\r\n        <ul>\r\n          <li>本页面数据由第三方维护，不能绝对保证完整和正确，信息仅供参考，请勿用于不良用途。</li>\r\n          <li>记录包含雀魂国服四人半庄段位战玉之间及王座之间的牌谱。</li>\r\n          <li>对局数据收集从 2019 年 8 月 23 日开始，之前的对局已无法获取。</li>\r\n          <li>\r\n            正常情况下全部对局都会被记录，但不排除因网络问题遗漏部分对局的情况。另 2019 年 10 月 10 日前因程序 Bug\r\n            每天晚间可能遗漏掉 10% ~ 20% 的对局，此 Bug 目前已经修复。\r\n          </li>\r\n          <li>页面不是实时更新，对局一般会在结束后数分钟至数小时内出现。</li>\r\n          <li>\r\n            如有问题或建议，请戳 <a href=\"mailto:i@sapika.ch\">SAPikachu (i@sapika.ch)</a> 或{\" \"}\r\n            <a href=\"https://github.com/SAPikachu/amae-koromo/\">提交 Issue</a>。\r\n          </li>\r\n        </ul>\r\n      </Alert>\r\n      <Alert container={Container} stateName=\"maintenance\">\r\n        <h4>临时维护公告</h4>\r\n        <p>因数据库出现问题，临时维护两小时左右</p>\r\n      </Alert>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport Loadable from \"react-loadable\";\r\nconst Helmet = Loadable({\r\n  loader: () => import(\"react-helmet\"),\r\n  loading: () => <></>\r\n});\r\n\r\nimport Scroller from \"../misc/scroller\";\r\n\r\nimport { Container } from \"../layout\";\r\nimport { AppHeader } from \"./appHeader\";\r\nimport GameRecords from \"../gameRecords\";\r\nimport { TITLE_PREFIX } from \"../../utils/constants\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Helmet>\r\n        <title>{TITLE_PREFIX}</title>\r\n      </Helmet>\r\n      <Scroller>\r\n        <AppHeader />\r\n      </Scroller>\r\n    </Router>\r\n  );\r\n}\r\nexport default App;\r\n","import * as React from \"react\";\nimport { render } from \"react-dom\";\n\nimport \"./styles/bootstrap-custom.scss\";\nimport \"./styles/styles.scss\";\n\nimport App from \"./components/app\";\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n"],"sourceRoot":""}