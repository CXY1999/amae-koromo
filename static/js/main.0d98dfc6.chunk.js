(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{110:function(e,t,n){e.exports=n(179)},119:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(39),c=(n(115),n(117),n(119),n(34)),o=n(56),l=function(e){var t=e.title,n=void 0===t?void 0:t,a=e.children,i=void 0===a?void 0:a,c=e.fluid,o=void 0!==c&&c;return r.a.createElement("div",{className:"my-5 container".concat(o?"-fluid":"")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},n&&r.a.createElement("h2",{className:"mb-4"},n),i)))},u=n(10),s=n(21);function d(e){var t=e.className,n=void 0===t?"":t,i=e.type,c=void 0===i?"info":i,o=e.container,l=void 0===o?r.a.Fragment:o,d=e.stateName,m=void 0===d?"":d,f=e.children,h=void 0===f?void 0:f,v="alertState_".concat(m),p=Object(a.useState)(function(){return m&&!!localStorage.getItem(v)}),y=Object(u.a)(p,2),g=y[0],b=y[1];if(Object(a.useEffect)(function(){m&&g&&localStorage.setItem(v,"true")},[g,m,v]),g)return null;var k=l;return r.a.createElement(k,null,r.a.createElement("div",{className:"alert alert-".concat(c," alert-dismissible fade show ").concat(n),role:"alert"},h,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(e){e.preventDefault(),b(!0),Object(s.c)()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))}function m(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,null,r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/"},"\u96c0\u9b42\u724c\u8c31\u5c4b"))),r.a.createElement(d,{container:l,stateName:"topNote"},r.a.createElement("h4",null,"\u8bf4\u660e"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u672c\u9875\u9762\u7531\u7b2c\u4e09\u65b9\u7ef4\u62a4\uff0c\u4e0e\u96c0\u9b42\u5b98\u65b9\u65e0\u5173\u3002"),r.a.createElement("li",null,"\u8bb0\u5f55\u5305\u542b\u96c0\u9b42\u56fd\u670d\u56db\u4eba\u534a\u5e84\u6bb5\u4f4d\u6218\u7389\u4e4b\u95f4\u53ca\u738b\u5ea7\u4e4b\u95f4\u7684\u724c\u8c31\u3002"),r.a.createElement("li",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\u5168\u90e8\u5bf9\u5c40\u90fd\u4f1a\u88ab\u8bb0\u5f55\uff0c\u4f46\u4e0d\u6392\u9664\u56e0\u7f51\u7edc\u95ee\u9898\u9057\u6f0f\u90e8\u5206\u5bf9\u5c40\u7684\u60c5\u51b5\u3002\u53e6 2019 \u5e74 10 \u6708 10 \u65e5\u524d\u56e0\u7a0b\u5e8f Bug \u6bcf\u5929\u665a\u95f4\u53ef\u80fd\u9057\u6f0f\u6389 10% ~ 20% \u7684\u5bf9\u5c40\uff0c\u6b64 Bug \u76ee\u524d\u5df2\u7ecf\u4fee\u590d\u3002"),r.a.createElement("li",null,"\u9875\u9762\u4e0d\u662f\u5b9e\u65f6\u66f4\u65b0\uff0c\u5bf9\u5c40\u4e00\u822c\u4f1a\u5728\u7ed3\u675f\u540e\u4e8c\u5341\u5206\u949f\u5185\u51fa\u73b0\u3002"),r.a.createElement("li",null,"\u5982\u6709\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u8bf7\u6233 ",r.a.createElement("a",{href:"mailto:i@sapika.ch"},"SAPikachu (i@sapika.ch)")," \u6216"," ",r.a.createElement("a",{href:"https://github.com/SAPikachu/amae-koromo/"},"\u63d0\u4ea4 Issue"),"\u3002"))),r.a.createElement(d,{container:l,stateName:"changeLog20191025"},r.a.createElement("h4",null,"\u6700\u8fd1\u66f4\u65b0\uff082019-10-25\uff09"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u65b0\u589e\u73a9\u5bb6\u4fe1\u606f\u9875\u9762"))))}var f=n(55);var h=function(){return r.a.createElement(c.a,null,r.a.createElement(o.a,null,r.a.createElement(m,null),r.a.createElement(l,null,r.a.createElement(f.a,null))))},v=document.getElementById("root");Object(i.render)(a.createElement(h,null),v)},21:function(e,t,n){"use strict";function a(){requestAnimationFrame(function(){return window.dispatchEvent(new UIEvent("resize"))}),setTimeout(function(){window.dispatchEvent(new UIEvent("resize"))},200)}function r(){window.scrollTo(0,0),requestAnimationFrame(function(){return window.scrollTo(0,0)})}n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var i=function(e){return e>0?"".concat((100*e).toFixed(2),"%"):""}},40:function(e,t,n){"use strict";var a;n.d(t,"a",function(){return r}),function(e){e[e["\u738b\u5ea7"]=16]="\u738b\u5ea7",e[e["\u7389"]=12]="\u7389"}(a||(a={})),t.b=a;var r=Object.keys(a).filter(function(e){return"number"===typeof a[e]}).length},5:function(e,t,n){"use strict";var a=n(6),r=n.n(a),i=n(25),c=n(26),o=n(28),l=n(1),u=n.n(l),s="".concat("https://d2ek5tscv4zquv.cloudfront.net/","api/"),d=n(40),m=n(54);function f(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s+t);case 2:if((n=e.sent).ok){e.next=5;break}throw n;case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}n.d(t,"c",function(){return y}),n.d(t,"e",function(){return g}),n.d(t,"a",function(){return d.b}),n.d(t,"d",function(){return d.a}),n.d(t,"g",function(){return m.d}),n.d(t,"f",function(){return m.c}),n.d(t,"b",function(){return m.a}),n.d(t,"h",function(){return m.e});var v=function(){function e(t){Object(i.a)(this,e),this._date=void 0,this._date=u()(t).startOf("day")}return Object(c.a)(e,[{key:"getMetadata",value:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("count/".concat(this._date.valueOf()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"",e.next=3,f("games/".concat(this._date.valueOf(),"?skip=").concat(t,"&limit=").concat(n,"&tag=").concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),p=function(){function e(t){Object(i.a)(this,e),this._playerId=void 0,this._playerId=t}return Object(c.a)(e,[{key:"getMetadata",value:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("player_stats/".concat(this._playerId));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"",e.next=3,f("player_records/".concat(this._playerId,"?skip=").concat(t,"&limit=").concat(n,"&tag=").concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),y=Object.freeze({create:function(e){return new b(new v(e))}}),g=Object.freeze({create:function(e){return new b(new p(e))}}),b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;Object(i.a)(this,e),this._loader=void 0,this._metadata=void 0,this._countPromise=void 0,this._chunks=void 0,this._itemsPerChunk=void 0,this._filterPredicate=void 0,this._filteredIndices=void 0,this._filterResultCache=void 0,this._loader=t,this._metadata=null,this._countPromise=null,this._chunks=[],this._itemsPerChunk=n,this._filterPredicate=null,this._filteredIndices=null,this._filterResultCache={}}return Object(c.a)(e,[{key:"setFilterPredicate",value:function(e){this._filterPredicate!==e&&(this._filterPredicate=e,this._filterResultCache={},this.updateFilteredIndices())}},{key:"updateFilteredIndices",value:function(){if(this._filteredIndices=null,this._filterPredicate){var e=this.getMetadataSync();if(e){for(var t=e.count,n=0,a=0,r=[],i=0;i<t;i++){var c=this._chunks[Math.floor(i/this._itemsPerChunk)];if(!c||c instanceof Promise)r.push(i);else{a++;var o=c[i%this._itemsPerChunk],l=this._filterResultCache[o.uuid];void 0===l&&(this._filterResultCache[o.uuid]=l=this._filterPredicate(o)),l&&(r.push(i),n++)}}this._filteredIndices=r,n<10&&a>=this._itemsPerChunk&&this._triggerFullLoad()}}}},{key:"getMetadataSync",value:function(){return!this._metadata||this._metadata instanceof Promise?null:this._metadata}},{key:"getCountMaybeSync",value:function(){var e=this.getMetadataSync();return e?this._filteredIndices?this._filteredIndices.length:e.count:this.getCount()}},{key:"getCount",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getMetadataSync()){e.next=3;break}return e.abrupt("return",this.getCountMaybeSync());case 3:if(!this._countPromise){e.next=5;break}return e.abrupt("return",this._countPromise);case 5:return this._metadata||(this._metadata=this._loader.getMetadata().then(function(e){return t._metadata=e,t.updateFilteredIndices(),t._countPromise=null,e})),this._countPromise=Promise.resolve(this._metadata).then(function(){return t.getCountMaybeSync()}),e.abrupt("return",this._countPromise);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUnfilteredCountSync",value:function(){var e=this.getMetadataSync();return e?e.count:null}},{key:"isItemLoaded",value:function(e){var t=this._mapItemIndex(e);if(null===t)return!1;var n=Math.floor(t/this._itemsPerChunk);return!!this._chunks[n]&&!(this._chunks[n]instanceof Promise)}},{key:"getItem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this._mapItemIndex(e);if(null===a)return this.getCount().then(function(){return t.getItem(e)});var r=Math.floor(a/this._itemsPerChunk),i=a%this._itemsPerChunk,c=this._chunks[r];return!c||c instanceof Promise?this._getChunk(r).then(function(e){return e[i]}):(n||this._filteredIndices||this.preload(e+this._itemsPerChunk),c[i])}},{key:"preload",value:function(e){var t=this.getCountMaybeSync();t instanceof Promise||e>=t||this.getItem(e,!0)}},{key:"_mapItemIndex",value:function(e){var t=this.getCountMaybeSync();if(t instanceof Promise)return null;if(e<0)return null;var n=t-e-1;return n<0?null:this._filteredIndices?this._filteredIndices[n]:n}},{key:"_getChunk",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._chunks[t]||(this._chunks[t]=this._loadChunk(t)),e.abrupt("return",this._chunks[t]);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_triggerFullLoad",value:function(){var e=this.getCountMaybeSync();if("number"===typeof e)for(var t=Math.ceil(e/this._itemsPerChunk),n=0;n<t;n++)this._chunks[n]||this._getChunk(n)}},{key:"_loadChunk",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var n,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCount();case 2:if(n=e.sent,a=Math.ceil(n/this._itemsPerChunk)){e.next=6;break}return e.abrupt("return",[]);case 6:if(!(t>=a)){e.next=9;break}return console.warn("Loading out-of-index chunk: ".concat(t,", number of items: ").concat(n)),e.abrupt("return",[]);case 9:return e.next=11,this._loader.getRecords(this._itemsPerChunk*t,this._itemsPerChunk,t===a-1?n.toString():"");case 11:return(i=e.sent).length<this._itemsPerChunk&&t<a-1&&console.warn("Unexpected number of items in chunk:",i.length),this._chunks[t]=i,this.updateFilteredIndices(),e.abrupt("return",i);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()},54:function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return m}),n.d(t,"b",function(){return f});var a=n(25),r=n(26),i=n(1),c=n.n(i),o=[20,80,200,600,800,1e3,1200,1400,2e3,2800,3200,3600,4e3,6e3,9e3],l=["\u4e00\u4f4d","\u4e8c\u4f4d","\u4e09\u4f4d","\u56db\u4f4d"],u=["#28a745","#17a2b8","#6c757d","#dc3545"],s=Object.freeze({getRankIndexByPlayer:function(e,t){var n=("object"===typeof t?t.accountId:t).toString(),a=e.players.map(function(e,t){return{player:e,index:t}});a.sort(function(e,t){return 5-t.index+t.player.score-(5-e.index+e.player.score)});for(var r=0;r<a.length;r++)if(a[r].player.accountId.toString()===n)return r;return-1},getPlayerRankLabel:function(e,t){return l[s.getRankIndexByPlayer(e,t)]||""},getPlayerRankColor:function(e,t){return u[s.getRankIndexByPlayer(e,t)]},encodeAccountId:function(e){return 1358437+(7*e+1117113^86216345)},formatFullStartTime:function(e){return c()(1e3*e.startTime).format("YYYY/M/D HH:mm")},getRecordLink:function(e,t){var n="object"===typeof t?t.accountId:t,a=n?"_a".concat(s.encodeAccountId("number"===typeof n?n:parseInt(n))):"";return"https://www.majsoul.com/1/?paipu=".concat(e.uuid).concat(a)}}),d=function(){function e(t){Object(a.a)(this,e),this._majorRank=void 0,this._minorRank=void 0;var n=t%1e4;this._majorRank=Math.floor(n/100),this._minorRank=n%100}return Object(r.a)(e,[{key:"getTag",value:function(){var e="\u521d\u58eb\u6770\u8c6a\u5723\u9b42"[this._majorRank-1];return this._majorRank==="\u521d\u58eb\u6770\u8c6a\u5723\u9b42".length?e:e+this._minorRank}},{key:"getMaxPoint",value:function(){return o[3*(this._majorRank-1)+this._minorRank-1]}},{key:"getStartingPoint",value:function(){return 1===this._majorRank?0:this.getMaxPoint()/2}},{key:"getNextLevel",value:function(){if(this._majorRank==="\u521d\u58eb\u6770\u8c6a\u5723\u9b42".length)return this;var t=this._majorRank,n=this._minorRank+1;return n>3&&(t++,n=1),new e(100*t+n)}},{key:"getPreviousLevel",value:function(){if(1===this._majorRank&&1===this._minorRank)return this;var t=this._majorRank,n=this._minorRank-1;return n<1&&(t--,n=3),new e(100*t+n)}},{key:"formatWithAdjustedScore",value:function(e){var t=this.getMaxPoint(),n=this;return t&&e>=t?(t=(n=this.getNextLevel()).getMaxPoint(),e=n.getStartingPoint()):e<0&&(!t||1===n._majorRank||2===n._majorRank&&1===n._minorRank?e=0:(t=(n=this.getPreviousLevel()).getMaxPoint(),e=n.getStartingPoint())),"".concat(n.getTag()," - ").concat(e).concat(t?"/"+t:"")}}]),e}();function m(e){return new d(e).getTag()}var f=Object.freeze({format:function(e){return new d(e.id).formatWithAdjustedScore(e.score+e.delta)}})},55:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(16),c=n(10),o=n(36),l=n(1),u=n.n(l),s=n(40),d=Object.freeze({toPlain:function(e){return"player"===e.type?e:Object(o.a)({},e,{date:e.date?u()(e.date).valueOf():null,selectedModes:e.selectedModes?Array.from(e.selectedModes):null})},fromPlain:function(e){return"player"===e.type?e:void 0===e.type?{date:e.date||null,searchText:e.searchText||"",selectedModes:e.selectedModes?new Set(e.selectedModes):null}:(console.warn("Unknown model data from location state:",e),m)}}),m={date:null,selectedModes:null,searchText:""},f=r.a.createContext([Object(o.a)({},m,{version:0}),function(){}]),h=function(){return Object(a.useContext)(f)};function v(e,t){if(e.type!==t.type)return!0;if(void 0===e.type&&t.type===e.type){if(void 0!==t.date&&t.date!==e.date&&(!t.date||!e.date||!u()(t.date).isSame(e.date,"day")))return!0;if(void 0!==t.searchText&&t.searchText!==e.searchText)return!0;var n=t.selectedModes;if(n&&n.size>=s.a&&(n=null),void 0!==n&&n!==e.selectedModes){if(!n||!e.selectedModes)return!0;if(function(e,t){if(e.size!==t.size)return!1;var n=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;if(!e.has(o))return!1}}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return!0}(e.selectedModes,n))return!0}}return"player"===e.type&&t.type===e.type&&void 0!==t.playerId&&t.playerId!==e.playerId}function p(e){var t=e.children,n=Object(i.h)(),l=Object(a.useReducer)(function(e,t){return v(e,t)?Object(o.a)({},e.type===t.type?e:{},function(e){return void 0===e.type&&(e.date&&(e.date=u()(e.date).valueOf()),e.selectedModes&&e.selectedModes.size>=s.a&&(e.selectedModes=null)),e}(t),{version:e.version+1,pendingRouteUpdate:!0}):e},null,function(){return Object(o.a)({},m,d.fromPlain((n.state||{}).model||{}),{version:(new Date).getTime()})}),h=Object(c.a)(l,2),p=h[0],y=h[1],g=Object(a.useMemo)(function(){return[p,y]},[p,y]);return r.a.createElement(f.Provider,{value:g},t)}var y=n(21),g={player:function(e){return{type:"player",playerId:e.id,version:0}},listing:function(e){var t=e.date?u()(e.date,"YYYY-MM-DD"):null;if(t&&!t.isValid())return"/";var n=e.modes?new Set(e.modes.split(".").map(function(e){return e.trim()}).filter(function(e){return!!e})):null;return{date:t?t.startOf("day").valueOf():null,selectedModes:n,searchText:e.search||"",version:0}}};function b(e){var t=e.view,n=Object(i.i)(),l=h(),u=Object(c.a)(l,2),s=u[0],m=u[1],f=Object(i.h)();Object(a.useEffect)(y.c,[s.type]);var v=f.state;if(v&&v.model.version===s.version)return delete s.pendingRouteUpdate,f.pathname!==v.pathname?r.a.createElement(i.a,{to:{pathname:v.pathname,state:v}}):r.a.createElement(r.a.Fragment,null);if(!v){var p=g[t](n);if("string"===typeof p)return r.a.createElement(i.a,{to:p});var b=Object(o.a)({},p,{version:s.version});return m(b),Object(y.b)(),r.a.createElement(i.a,{to:{pathname:f.pathname,state:{pathname:f.pathname,model:d.toPlain(b)}}})}if(s.pendingRouteUpdate){var k=te(s);return delete s.pendingRouteUpdate,r.a.createElement(i.a,{to:{pathname:k,state:{pathname:k,model:d.toPlain(s)}}})}return m(d.fromPlain(v.model)),r.a.createElement(r.a.Fragment,null)}var k=n(25),_=n(26),E=n(5),j={loading:!0},w=new(function(){function e(){Object(k.a)(this,e)}return Object(_.a)(e,[{key:"getCount",value:function(){return 0}},{key:"getUnfilteredCount",value:function(){return 0}},{key:"getMetadata",value:function(){return null}},{key:"getItem",value:function(e){return j}},{key:"isItemLoaded",value:function(e){return!1}}]),e}()),O=function(){},x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;Object(k.a)(this,e),this._provider=void 0,this._onDataUpdate=void 0,this._triggeredRequest=void 0,this._provider=t,this._onDataUpdate=n,this._triggeredRequest=!1}return Object(_.a)(e,[{key:"_installHook",value:function(e){this._triggeredRequest||(this._triggeredRequest=!0,e.then(this._callHook.bind(this)))}},{key:"_callHook",value:function(){this._onDataUpdate()}},{key:"getCount",value:function(){var e=this._provider.getCountMaybeSync();return e instanceof Promise?(this._installHook(e),0):e}},{key:"getUnfilteredCount",value:function(){return this._provider.getUnfilteredCountSync()||0}},{key:"getMetadata",value:function(){return this._provider.getMetadataSync()}},{key:"getItem",value:function(e){return this._provider.isItemLoaded(e)?this._provider.getItem(e):(this._triggeredRequest||this._installHook(this._provider.getItem(e)),j)}},{key:"isItemLoaded",value:function(e){return!(e<0)&&this._provider.isItemLoaded(e)}},{key:"setUpdateHook",value:function(e){this._onDataUpdate=e}},{key:"cancelUpdateHook",value:function(){this._onDataUpdate=O}}]),e}(),C=r.a.createContext(w),I=function(){return Object(a.useContext)(C)};C.Consumer;function M(e){var t=e.children,n=h(),i=Object(c.a)(n,1)[0],o=Object(a.useState)(function(){return{}}),l=Object(c.a)(o,1)[0],s=function(e){if(void 0!==e.type)return Object(a.useMemo)(function(){return null},[null,""]);var t=(e.searchText||"").trim()||"",n=t||e.selectedModes&&e.selectedModes.size<E.d;return Object(a.useMemo)(function(){return n?function(n){return!(e.selectedModes&&!e.selectedModes.has(n.modeId.toString()))&&!!n.players.some(function(e){return e.nickname.toLowerCase().indexOf(t)>-1})}:null},[void 0===e.type&&e.selectedModes||null,t])}(i),d=Object(a.useMemo)(function(){var e=function(e){if(void 0===e.type)return u()(e.date||u()()).startOf("day").valueOf().toString();if("player"===e.type)return"player-".concat(e.playerId);throw new Error("Unknown model type")}(i);return l[e]||(l[e]=function(e){if(void 0===e.type)return E.c.create(e.date||u()().startOf("day"));if("player"===e.type)return E.e.create(e.playerId);throw new Error("Not implemented")}(i)),l[e]},[i,l]),m=Object(a.useState)(function(){return w}),f=Object(c.a)(m,2),v=f[0],p=f[1],y=Object(a.useCallback)(function(){d.setFilterPredicate(s);var e=new x(d);p(e)},[d,s]);return Object(a.useEffect)(y,[y]),Object(a.useEffect)(function(){var e=v;if(e instanceof x)return function(){return e.cancelUpdateHook()}},[v]),Object(a.useEffect)(function(){v instanceof x&&v.setUpdateHook(y)},[v,y]),r.a.createElement(C.Provider,{value:v},t)}var P=n(31),R=n(107),N=n(12),S=n(98),T=n(56),D=n(48),Y=n.n(D),F=r.a.memo(function(e){var t=e.game,n=e.activePlayerId;return r.a.createElement("div",{className:"row no-gutters"},t.players.map(function(e){return r.a.createElement("div",{key:e.accountId,className:"col-12 col-md-6 pr-1"},r.a.createElement(S.a,{game:t,player:e,isActive:e.accountId.toString()===n}))}))}),U=function(e){var t,n=e.cellData;return(t=n)?u.a.unix(t).format("HH:mm"):null},L=function(e){var t=e.rowData;return t.loading?"":E.b.formatFullStartTime(t)},H=function(e){var t=e.rowData,n=e.columnData;return t&&!t.loading&&n.activePlayerId?r.a.createElement("span",{className:"font-weight-bold",style:{color:E.b.getPlayerRankColor(t,n.activePlayerId)}},E.b.getPlayerRankLabel(t,n.activePlayerId).slice(0,1)):""},z=function(e){var t=e.cellData;return E.a[t]};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showStartEnd,n=void 0===t||t,i=e.showFullTime,o=void 0!==i&&i,l=I(),u=h(),s=Object(c.a)(u,1)[0],d=Object(T.b)(),m=d.isScrolling,f=d.onChildScroll,v=d.scrollTop,p=d.height,g=d.registerChild,b=Object(a.useCallback)(function(e){var t=e.index;return l.getItem(t)},[l]),k=Object(a.useCallback)(function(e){var t=e.index;return t>=0?Object(N.a)({loading:!l.isItemLoaded(t),even:0===(1&t)}):""},[l]),_=Object(a.useCallback)(function(){return l.getUnfilteredCount()?null:r.a.createElement("p",{className:"text-center"},"\u52a0\u8f7d\u4e2d...")},[l]),E="player"===s.type?s.playerId:void 0,j=Object(a.useCallback)(function(e){var t=e.rowData;return t&&t.players?r.a.createElement(F,{game:t,activePlayerId:E}):null},[E]),w=l.getUnfilteredCount();return Object(a.useEffect)(function(){Object(y.c)(),w&&Y.a.preloadAll()},[!!w]),r.a.createElement("div",{ref:g},r.a.createElement(R.a,{disableHeight:!0},function(e){var t=e.width;return r.a.createElement(P.b,{autoHeight:!0,className:E?"with-active-player":"",rowCount:l.getCount(),rowGetter:b,rowHeight:window.matchMedia("(min-width: 768px)").matches?70:140,headerHeight:50,width:t,height:p,isScrolling:m,onScroll:f,scrollTop:v,rowClassName:k,noRowsRenderer:_},r.a.createElement(P.a,{dataKey:"modeId",label:"\u7b49\u7ea7",cellRenderer:z,width:40}),E?r.a.createElement(P.a,{dataKey:"modeId",label:"\u987a\u4f4d",columnData:{activePlayerId:E},cellRenderer:H,width:40}):null,r.a.createElement(P.a,{dataKey:"players",label:"\u73a9\u5bb6",cellRenderer:j,width:120,flexGrow:1}),n?[r.a.createElement(P.a,{key:"startTime",dataKey:"startTime",label:"\u5f00\u59cb",cellRenderer:U,width:50,className:"text-right",headerClassName:"text-right"}),r.a.createElement(P.a,{key:"endTime",dataKey:"endTime",label:"\u7ed3\u675f",cellRenderer:U,width:50,headerClassName:"text-right",className:"text-right"})]:null,o?r.a.createElement(P.a,{dataKey:"startTime",label:"\u65f6\u95f4",cellRenderer:L,width:140,className:"text-right",headerClassName:"text-right"}):null)}))}function K(e){var t=e.items,n=void 0===t?[]:t,a=e.selectedItemKeys,i=void 0===a?null:a,c=e.groupKey,o=void 0===c?"default":c,l=e.onChange,u=void 0===l?function(e){}:l,s=function(e,t){if((!t||i&&!i.has(e))&&(t||!i||i.has(e))){var a=new Set(i||n.map(function(e){return e.key}));t?a.add(e):a.delete(e),u(a)}};return r.a.createElement(r.a.Fragment,null,n.map(function(e){return r.a.createElement("div",{className:"form-check form-check-inline",key:e.key},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"CG_".concat(o,"_").concat(e.key),value:e.key,checked:!i||i.has(e.key),onChange:function(t){return s(e.key,t.currentTarget.checked)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"CG_".concat(o,"_").concat(e.key)},e.label))}))}function q(e){var t=e.date,n=void 0===t?u()():t,i=e.onChange,c=void 0===i?function(e){}:i,o=e.className,l=void 0===o?"":o,s=e.min,d=void 0===s?void 0:s,m=e.max,f=void 0===m?u()():m,h=Object(a.useCallback)(function(e){return c(u()(e.currentTarget.value,"YYYY-MM-DD"))},[c]);return r.a.createElement("input",{className:l,type:"date",value:u()(n).format("YYYY-MM-DD"),min:d?u()(d).format("YYYY-MM-DD"):void 0,max:f?u()(f).format("YYYY-MM-DD"):void 0,onChange:h})}var B=function(e){var t=e.title,n=void 0===t?"":t,a=e.children,i=void 0===a?void 0:a;return r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},n),r.a.createElement("div",{className:"col-sm-10"},i))},G=Object.keys(E.a).filter(function(e){return"string"!==typeof E.a[e]}).map(function(e){return{key:String(E.a[e]),label:e}}),J=u()().startOf("day");function W(){var e=h(),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useCallback)(function(e){return i({searchText:e.currentTarget.value})},[i]),l=Object(a.useCallback)(function(e){return i({selectedModes:e})},[i]),u=Object(a.useCallback)(function(e){return i({date:e})},[i]);return void 0!==n.type?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{title:"\u65e5\u671f"},r.a.createElement(q,{min:"2019-08-23",date:n.date||J,onChange:u,className:"form-control"})),r.a.createElement(B,{title:"\u67e5\u627e\u73a9\u5bb6"},r.a.createElement("input",{type:"text",className:"form-control",value:n.searchText,onChange:o})),r.a.createElement(B,null,r.a.createElement(K,{items:G,selectedItemKeys:n.selectedModes,onChange:l})))}var V=n(54),Q=Y()({loader:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,509))},loading:function(){return r.a.createElement(r.a.Fragment,null)}}),X=Y()({loader:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,510))},loading:function(){return r.a.createElement(r.a.Fragment,null)}});function Z(){var e=I(),t=e.getMetadata();return Object(a.useEffect)(y.c,[!!t]),t&&t.nickname?r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},"\u73a9\u5bb6\uff1a",t.nickname),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h3",{className:"text-center mb-4"},"\u6700\u8fd1\u8d70\u52bf"),r.a.createElement(X,{dataAdapter:e,playerId:t.id,aspect:6}),r.a.createElement("h3",{className:"text-center mt-4 mb-4"},"\u76f8\u5173\u6570\u636e"),r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-4 col-md-2"},"\u8bb0\u5f55\u573a\u6570"),r.a.createElement("dd",{className:"col-8 col-md-4"},t.count),r.a.createElement("dt",{className:"col-4 col-md-2"},"\u5f53\u524d\u7b49\u7ea7"),r.a.createElement("dd",{className:"col-8 col-md-4"},V.b.format(t.level)),r.a.createElement("dt",{className:"col-4 col-md-2"},"\u5e73\u5747\u987a\u4f4d"),r.a.createElement("dd",{className:"col-8 col-md-4"},t.avg_rank.toFixed(3)),r.a.createElement("dt",{className:"col-4 col-md-2"},"\u88ab\u98de\u7387"),r.a.createElement("dd",{className:"col-8 col-md-4"},Object(y.a)(t.negative_rate)))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-center mb-4"},"\u7d2f\u8ba1\u6218\u7ee9"),r.a.createElement(Q,{metadata:t})))):null}n.d(t,"b",function(){return te});var $="/player/:id",ee="/:date(\\d{4}-\\d{2}-\\d{2})/:modes([0-9.]+)?/:search?";function te(e){return"player"===e.type?Object(i.f)($,{id:e.playerId}):e.selectedModes&&e.selectedModes.size||e.searchText||e.date?Object(i.f)(ee,{date:u()(e.date||new Date).format("YYYY-MM-DD"),modes:e.selectedModes&&e.selectedModes.size?Array.from(e.selectedModes).join("."):void 0,search:e.searchText||void 0}):"/"}t.a=function(){return r.a.createElement(p,null,r.a.createElement(M,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:$},r.a.createElement(b,{view:"player"}),r.a.createElement(Z,null),r.a.createElement(A,{showFullTime:!0,showStartEnd:!1})),r.a.createElement(i.b,{exact:!0,path:["/",ee]},r.a.createElement(b,{view:"listing"}),r.a.createElement(W,null),r.a.createElement(A,null)),r.a.createElement(i.b,null,r.a.createElement(i.a,{to:"/"})))))}},56:function(e,t,n){"use strict";n.d(t,"b",function(){return o});var a=n(0),r=n.n(a),i=n(106),c=r.a.createContext({}),o=function(){return Object(a.useContext)(c)};t.a=function(e){var t=e.children;return r.a.createElement(i.a,null,function(e){return r.a.createElement(c.Provider,{value:e},t)})}},98:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(0),r=n.n(a),i=n(34),c=n(105),o=n(5),l=n(55),u=r.a.memo(function(e){var t=e.player,n=e.game,a=e.isActive,u=e.hideDetailLink,s=t.nickname,d=t.level,m=t.score,f=t.accountId,h=0===o.b.getRankIndexByPlayer(n,t);return r.a.createElement("span",{className:"player ".concat(h&&"font-weight-bold"," ").concat(a&&"active-player")},r.a.createElement("a",{href:o.b.getRecordLink(n,t),title:"\u67e5\u770b\u724c\u8c31",target:"_blank"},"[",Object(o.h)(d),"] ",s," ",void 0!==m&&"[".concat(m,"]"))," ",u||a?null:r.a.createElement(i.b,{title:"\u73a9\u5bb6\u8bb0\u5f55",to:Object(l.b)({type:"player",playerId:f.toString(),version:0})},r.a.createElement(c.a,null)))})}},[[110,5,4]]]);
//# sourceMappingURL=main.0d98dfc6.chunk.js.map