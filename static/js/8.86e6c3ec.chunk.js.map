{"version":3,"sources":["components/routing/index.tsx","components/playerDetails/playerDetailsSettings.tsx","components/playerDetails/statItem.tsx","components/playerDetails/estimatedStableLevel.tsx","components/playerDetails/sameMatchRate.tsx","components/playerDetails/playerDetails.tsx"],"names":["RouteDef","Error","ViewRoutes","Context","React","createContext","NavButtons","className","replace","keepState","routes","useContext","match","useRouteMatch","url","map","route","key","path","to","loc","pathname","state","undefined","activeClassName","title","ViewSwitch","defaultPath","mutateTitle","children","SimpleRoutedSubViews","Provider","value","props","x","slice","DateRangeOptions","DATE_RANGE_ITEMS","Object","keys","label","PlayerDetailsSettings","showLevel","useModel","model","updateModel","useState","type","All","startDate","endDate","dayjs","isSame","subtract","Custom","Last4Weeks","mode","setMode","DATE_MIN","customDateFrom","setCustomDateFrom","customDateTo","setCustomDateTo","useEffect","playerId","selectedMode","setSelectedMode","useCallback","inline","selectedItemKey","items","groupKey","onChange","min","date","StatItem","description","data-tip","EstimatedStableLevel","metadata","level","LevelWithDelta","getAdjustedLevel","parseInt","getTag","GameMode","王座","玉","notEnoughData","count","expectedGamePoint","PlayerMetadata","calculateExpectedGamePoint","estimatedNumGamesToChangeLevel","getMaxPoint","isAllowedMode","curPoint","Level","id","score","delta","getStartingPoint","changeLevelMsg","getStableLevelComponents","toFixed","join","estimateStableLevel2","Math","abs","SameMatchRateTable","numGames","numDisplay","currentAccountId","adapter","useDataAdapter","getCount","numProcessedGames","rates","useMemo","i","game","getItem","players","player","accountId","result","values","sort","a","b","generatePlayerPathById","nickname","formatPercent","SameMatchRate","RankRateChart","Loadable","loader","loading","RecentRankChart","WinLoseDistribution","ReactTooltipPromise","ReactTooltip","ExtendedStatsViewAsync","view","stats","useAsync","extended_stats","triggerRelayout","View","PlayerExtendedStatsView","和牌率","放铳率","自摸率","默听率","流局率","流听率","副露率","立直率","和了巡数","平均打点","平均铳点","MoreStats","max_level","formatAdjustedScore","levelObj","fixMaxLevel","最大连庄","一发率","里宝率","被炸率","平均被炸点数","放铳时立直率","放铳时副露率","立直后放铳率","副露后放铳率","立直后和牌率","副露后和牌率","立直后流局率","副露后流局率","BasicStats","avg_rank","negative_rate","LuckStats","役满","累计役满","最大累计番数","流满","W立直","formatFixed3","平均起手向听","LargestLost","最近大铳","target","rel","href","GameRecord","getRecordLink","FanStatEntryList","formatFanSummary","fans","formatFullStartTime","start_time","FanStatEntry2","formatFan","PlayerStats","useLocation","then","rebuild","PlayerDetails","dataAdapter","getMetadata","Helmet","aspect","effect","multiline","place"],"mappings":"kHAAA,qNAOaA,EAAmD,WAC9D,MAAM,IAAIC,MAAM,+BAILC,EAAmD,WAC9D,MAAM,IAAID,MAAM,+BAGZE,EAAUC,IAAMC,cAA+B,IAE9C,SAASC,EAAT,GAA6E,IAAD,IAAtDC,iBAAsD,MAA1C,GAA0C,MAAtCC,eAAsC,aAArBC,iBAAqB,SAC3EC,EAASC,qBAAWR,GACpBS,EAAQC,eAAmB,CAAEC,IAAK,IACxC,OACE,yBAAKP,UAAS,6BAAwBA,IACnCG,EAAOK,KAAI,SAAAC,GAAK,OACf,kBAAC,IAAD,CACEC,IAAKD,EAAME,KACXC,GAAI,SAAAC,GAAG,MAAK,CAAEC,SAAS,GAAD,OAAKT,EAAME,IAAX,YAAkBE,EAAME,MAAQI,MAAOb,EAAYW,EAAIE,WAAQC,IACrFf,QAASA,EACTD,UAAU,WACViB,gBAAgB,UAEfR,EAAMS,WAOV,SAASC,EAAT,GAQH,IAPFC,EAOC,EAPDA,YAOC,IANDC,mBAMC,SALDC,EAKC,EALDA,SAMMnB,EAASC,qBAAWR,GACpBS,EAAQC,eAAmB,CAAEC,IAAK,IAExC,OACE,kBAAC,IAAD,KACGJ,EAAOK,KAAI,SAAAC,GAAK,OACf,kBAAC,IAAD,CAAOC,IAAKD,EAAME,KAAMA,KAAI,UAAKN,EAAME,IAAX,YAAkBE,EAAME,OACjDU,GACC,kBAAC,SAAD,KACE,+BAAQZ,EAAMS,QAGjBT,EAAMa,aAGX,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUV,GAAE,UAAKP,EAAME,IAAX,YAAkBa,GAAejB,EAAO,GAAGQ,SAExDW,GAKA,SAASC,EAAT,GAIH,IAHFD,EAGC,EAHDA,SAIA,OAAO,kBAAC1B,EAAQ4B,SAAT,CAAkBC,MAAOH,EAAS,GAAGI,MAAMJ,SAASd,KAAI,SAAAmB,GAAC,OAAIA,EAAED,UAASJ,EAASM,MAAM,M,4CClE3FC,E,yIAAAA,K,mBAAAA,E,sCAAAA,E,6BAAAA,M,KAKL,IAAMC,EAAmBC,OAAOC,KAAKH,GAAkBrB,KAAI,SAACE,GAAD,MAAkB,CAC3EA,IAAKmB,EAAiBnB,GACtBuB,MAAOJ,EAAiBnB,OAGX,SAASwB,EAAT,GAAuD,IAAD,IAArBC,iBAAqB,WACtCC,cADsC,mBAC5DC,EAD4D,KACrDC,EADqD,OAE3CC,oBAAS,WAC/B,MAAmB,WAAfF,EAAMG,KACDX,EAAiBY,IAErBJ,EAAMK,UAIPL,EAAMM,UAAWC,IAAMP,EAAMM,SAASE,OAAOD,MAAS,SACxDA,IAAMP,EAAMK,WAAWG,OAAOD,MAAQE,SAAS,GAAI,OAAQ,OAItDjB,EAAiBkB,OAFflB,EAAiBmB,WANjBnB,EAAiBY,OAPuC,mBAE5DQ,EAF4D,KAEtDC,EAFsD,OAiBvBX,oBAAS,iBACpC,WAAfF,EAAMG,MAAqBH,EAAMK,UAAYL,EAAMK,UAAYS,OAlBE,mBAiB5DC,EAjB4D,KAiB5CC,EAjB4C,OAoB3Bd,oBAAS,iBAChC,WAAfF,EAAMG,MAAqBH,EAAMM,QAAUN,EAAMM,QAAUC,SArBM,mBAoB5DU,EApB4D,KAoB9CC,EApB8C,KAuBnEC,qBAAU,WACR,GAAmB,WAAfnB,EAAMG,KAGV,OAAQS,GACN,KAAKpB,EAAiBY,IACpBH,EAAY,CACVE,KAAM,SACNiB,SAAUpB,EAAMoB,SAChBf,UAAW,KACXC,QAAS,KACTe,kBAAc1C,IAEhB,MACF,KAAKa,EAAiBmB,WACpBV,EAAY,CACVE,KAAM,SACNiB,SAAUpB,EAAMoB,SAChBf,UAAWE,MAAQE,SAAS,GAAI,OAChCH,QAAS,OAEX,MACF,KAAKd,EAAiBkB,OACpBT,EAAY,CACVE,KAAM,SACNiB,SAAUpB,EAAMoB,SAChBf,UAAWU,EACXT,QAASW,OAId,CAACjB,EAAOY,EAAMG,EAAgBE,EAAchB,IAC/C,IAAMqB,EAAkBC,uBAAY,SAAAX,GAAI,OAAIX,EAAY,CAAEE,KAAM,SAAUkB,aAAcT,MAAS,CAACX,IAClG,OACE,oCACE,yBAAKtC,UAAU,OACb,yBAAKA,UAAU,SACb,kBAAC,IAAD,CAASkB,MAAM,eAAK2C,QAAQ,GAC1B,kBAAC,IAAD,CACErB,KAAK,QACLsB,gBAAiBb,EACjBc,MAAOjC,EACPkC,SAAS,iCACTC,SAAUf,MAIff,GACC,yBAAKnC,UAAU,SACb,kBAAC,IAAD,CAASkB,MAAM,eAAK2C,QAAQ,GAC1B,kBAAC,IAAD,CAAcZ,KAAMZ,EAAMqB,aAAcO,SAAUN,OAKzDV,IAASpB,EAAiBkB,OACzB,yBAAK/C,UAAU,aACb,yBAAKA,UAAU,SACb,kBAAC,IAAD,CAAS6D,QAAQ,GACf,kBAAC,IAAD,CAAYK,IAAKf,IAAUc,SAAUZ,EAAmBc,KAAMf,EAAgBpD,UAAU,iBACxF,kBAAC,IAAD,CAAYkE,IAAKf,IAAUc,SAAUV,EAAiBY,KAAMb,EAActD,UAAU,oBAIxF,MCxGK,SAASoE,EAAT,GAKX,IAL+BnC,EAKhC,EALgCA,MAAOoC,EAKvC,EALuCA,YAKvC,IALoDrE,iBAKpD,MALgE,GAKhE,EALoEsB,EAKpE,EALoEA,SAMrE,OAAQ,oCACN,wBAAItB,UAAS,qCAAgCA,IAAciC,GAC3D,wBAAIjC,UAAS,oCAA+BA,GAAasE,WAAUD,GAAe,IAC/E/C,ICNQ,SAASiD,EAAT,GAA2E,IAA3CC,EAA0C,EAA1CA,SAA0C,EACvEpC,cAATC,EADgF,oBAEjFoC,EAAQC,iBAAeC,iBAAiBH,EAASC,OACjDxB,EAAOZ,EAAMqB,aACdkB,SAASvC,EAAMqB,cAC0B,WAA1CgB,iBAAeG,OAAOL,EAASC,OAC/BK,WAASC,aACTD,WAASE,OACPC,EAAgBT,EAASU,MAAQ,IACjCC,EAAoBC,iBAAeC,2BAA2Bb,EAAUvB,GAC1EqC,EAAiC,KACrC,GAAIb,EAAMc,eAAiBd,EAAMe,cAAcvC,GAAO,CACpD,IAAMwC,EAAWhB,EAAM5B,OAAO,IAAI6C,QAAMlB,EAASC,MAAMkB,KACnDnB,EAASC,MAAMmB,MAAQpB,EAASC,MAAMoB,MACtCpB,EAAMqB,mBACVR,EACEH,EAAoB,GAAKV,EAAMc,cAAgBE,GAAYN,EAAoBM,EAAWN,EAE9F,IAAMY,EAAiBT,EAA8B,oDACvCA,EAAiC,EAAI,SAAM,SADJ,sBAEjD,GACJ,OACE,oCACE,kBAAClB,EAAD,CACEnC,MAAM,2BACNoC,YAAW,gBAAMS,WAAS7B,GAAf,mIACTgC,EAAgB,qHAAwB,GAD/B,wGAEoBG,iBAAeY,yBAAyBxB,EAAUvB,GAC9EzC,KAAI,SAAAmB,GAAC,OAAIA,EAAEsE,QAAQ,MACnBC,KAAK,KAJG,KAKXlG,UAAWiF,EAAgB,sCAAwC,IAEnE,8BACGG,iBAAee,qBAAqB3B,EAAUvB,GAC9CgC,GAAiB,MAGtB,kBAACb,EAAD,CACEnC,MAAM,2BACNoC,YAAW,gBAAMS,WAAS7B,GAAf,+FAAqC8C,GAArC,OACTd,EAAgB,qHAAwB,IAE1CjF,UAAWiF,EAAgB,sCAAwC,IAEnE,8BACGE,EAAkBc,QAAQ,GAC1BX,EAA8B,YAAQc,KAAKC,IAAIf,GAAgCW,QAAQ,GAAzD,KAAiE,GAC/FhB,GAAiB,O,4CC3CrB,SAASqB,EAAT,GAAwF,IAAD,IAAzDC,gBAAyD,MAA9C,IAA8C,MAAzCC,kBAAyC,MAA5B,GAA4B,MAAxBC,wBAAwB,MAAL,EAAK,EACtFC,EAAUC,cACVzB,EAAQwB,EAAQE,WAChBC,EAAoBT,KAAKlC,IAAIgB,EAAOqB,GACpCO,EAAQC,mBAAQ,WACpB,GAAI7B,GAAS,EACX,OAAO,KAGT,IADA,IAAM1E,EAAkE,GAC/DwG,EAAI,EAAGA,EAAIH,EAAmBG,IAAK,CAC1C,IAAMC,EAAOP,EAAQQ,QAAQF,GAC7B,KAAM,SAAUC,GACd,OAAO,KAHiC,2BAK1C,YAAqBA,EAAKE,QAA1B,+CAAmC,CAAC,IAAzBC,EAAwB,QAC7BA,EAAOC,YAAcZ,IAGpBjG,EAAI4G,EAAOC,aACd7G,EAAI4G,EAAOC,WAAa,CACtBD,SACAlC,MAAO,IAGX1E,EAAI4G,EAAOC,WAAWnC,UAfkB,mFAkB5C,IAAMoC,EAASvF,OAAOwF,OAAO/G,GAE7B,OADA8G,EAAOE,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAExC,MAAQuC,EAAEvC,SAC3BoC,IACN,CAACpC,EAAOwB,EAASG,EAAmBJ,IACvC,OAAIvB,GAAS,EACJ,KAEJ4B,EAIH,wBAAI9G,UAAU,OACX8G,EAAMlF,MAAM,EAAG4E,GAAYhG,KAAI,SAAAmB,GAAC,OAC/B,oCACE,wBAAI3B,UAAU,qCACZ,kBAAC,IAAD,CAAMY,GAAI+G,iCAAuBhG,EAAEyF,OAAOC,YAAa1F,EAAEyF,OAAOQ,WAElE,wBAAI5H,UAAU,6BACX6H,YAAclG,EAAEuD,MAAQ2B,GAD3B,KACiDlF,EAAEuD,MADnD,UATC,kBAAC,IAAD,MAkBI,SAAS4C,EAAT,GAAmE,IAAD,IAAzCtB,kBAAyC,MAA5B,GAA4B,MAAxBC,wBAAwB,MAAL,EAAK,EAC/E,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAU9F,KAAK,SAASO,MAAM,2BAC5B,kBAACoF,EAAD,CAAoBG,iBAAkBA,EAAkBD,WAAYA,KAEtE,kBAAC,IAAD,CAAU7F,KAAK,MAAMO,MAAM,gBACzB,kBAACoF,EAAD,CAAoBG,iBAAkBA,EAAkBD,WAAYA,EAAYD,SAAU,eAG9F,kBAAC,IAAD,CAAYvG,UAAU,UACtB,kBAAC,IAAD,CAAYqB,aAAa,KC1E/B,wCAwBA,IAAM0G,EAAgBC,YAAS,CAC7BC,OAAQ,kBAAM,qDACdC,QAAS,kBAAM,kBAAC,IAAD,SAEXC,EAAkBH,YAAS,CAC/BC,OAAQ,kBAAM,sDACdC,QAAS,kBAAM,kBAAC,IAAD,SAEXE,EAAsBJ,YAAS,CACnCC,OAAQ,kBAAM,qDACdC,QAAS,kBAAM,kBAAC,IAAD,SAEXG,EAAsB,kCACtBC,EAAeN,YAAS,CAC5BC,OAAQ,kBAAMI,GACdH,QAAS,kBAAM,QAGjB,SAASK,EAAT,GAMI,IALF/D,EAKC,EALDA,SACAgE,EAIC,EAJDA,KAKMC,EAAQC,YAASlE,EAASmE,gBAEhC,GADAnF,oBAAUoF,IAAiB,GAAGH,KACzBA,EACH,OAAO,KAET,IAAMI,EAAOL,EACb,OAAO,kBAACK,EAAD,CAAMJ,MAAOA,EAAOjE,SAAUA,IAGvC,SAASsE,EAAT,GAA6E,IAA1CL,EAAyC,EAAzCA,MACjC,OACE,oCACE,kBAACrE,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,iDAC/BwD,YAAcY,EAAMM,oBAAO,IAE9B,kBAAC3E,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,iDAC/BwD,YAAcY,EAAMO,oBAAO,IAE9B,kBAAC5E,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,uDAC/BwD,YAAcY,EAAMQ,oBAAO,IAE9B,kBAAC7E,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,+EAC/BwD,YAAcY,EAAMS,oBAAO,IAE9B,kBAAC9E,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,iDAC/BwD,YAAcY,EAAMU,oBAAO,IAE9B,kBAAC/E,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,mEAC/BwD,YAAcY,EAAMW,oBAAO,IAE9B,kBAAChF,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,iDAC/BwD,YAAcY,EAAMY,oBAAO,IAE9B,kBAACjF,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,iDAC/BwD,YAAcY,EAAMa,oBAAO,IAE9B,kBAAClF,EAAD,CAAUnC,MAAM,6BAASwG,EAAMc,0BAAQ,GAAGtD,QAAQ,IAClD,kBAAC7B,EAAD,CAAUnC,MAAM,4BAAQwG,EAAMe,0BAAQ,GACtC,kBAACpF,EAAD,CAAUnC,MAAM,4BAAQwG,EAAMgB,0BAAQ,IAiB5C,SAASC,EAAT,GAAmG,IAA9EjB,EAA6E,EAA7EA,MAAOjE,EAAsE,EAAtEA,SAC1B,OACE,oCACE,kBAACJ,EAAD,CAAUnC,MAAM,4BAAQyC,iBAAeG,OAAOL,EAASmF,YACvD,kBAACvF,EAAD,CAAUnC,MAAM,4BAAQyC,iBAAekF,oBAhB7C,SAAqBnF,GACnB,IAAMoF,EAAW,IAAInE,IAAMjB,EAAMkB,IACjC,OAAIlB,EAAMmB,MAAQnB,EAAMoB,MAAQgE,EAAS/D,mBAChC,CACLH,GAAIlB,EAAMkB,GACVC,MAAOiE,EAAS/D,mBAChBD,MAAO,GAGJpB,EAOwDqF,CAAYtF,EAASmF,aAChF,kBAACvF,EAAD,CAAUnC,MAAM,4BAAQwG,EAAMsB,0BAAQ,GACtC,kBAAC3F,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,mEAC/BwD,YAAcY,EAAMuB,oBAAO,IAE9B,kBAAC5F,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,yEAC/BwD,YAAcY,EAAMwB,oBAAO,IAE9B,kBAAC7F,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,6GAC/BwD,YAAcY,EAAMyB,oBAAO,IAE9B,kBAAC9F,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,2FAClCoE,EAAM0B,sCAAU,GAEnB,kBAAC/F,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAM2B,sCAAU,IAEjC,kBAAChG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAM4B,sCAAU,IAEjC,kBAACjG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAM6B,sCAAU,IAEjC,kBAAClG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAM8B,sCAAU,IAEjC,kBAACnG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAM+B,sCAAU,IAEjC,kBAACpG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAMgC,sCAAU,IAEjC,kBAACrG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAMiC,sCAAU,IAEjC,kBAACtG,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,yEAClCwD,YAAcY,EAAMkC,sCAAU,KAKvC,SAASC,EAAT,GAAiE,IAA3CpG,EAA0C,EAA1CA,SACpB,OACE,oCACE,kBAACJ,EAAD,CAAUnC,MAAM,4BAAQuC,EAASU,OACjC,kBAACd,EAAD,CAAUnC,MAAM,4BAAQyC,iBAAeG,OAAOL,EAASC,QACvD,kBAACL,EAAD,CAAUnC,MAAM,4BAAQyC,iBAAekF,oBAAoBpF,EAASC,QACpE,kBAAC8D,EAAD,CAAwB/D,SAAUA,EAAUgE,KAAMM,IAClD,kBAAC1E,EAAD,CAAUnC,MAAM,4BAAQuC,EAASqG,SAAS5E,QAAQ,IAClD,kBAAC7B,EAAD,CAAUnC,MAAM,sBAAO4F,YAAcrD,EAASsG,gBAC9C,kBAACvG,EAAD,CAAsBC,SAAUA,KAItC,SAASuG,EAAT,GAA+D,IAA1CtC,EAAyC,EAAzCA,MACnB,OACE,oCACE,kBAACrE,EAAD,CAAUnC,MAAM,eAAKoC,YAAY,wCAC9BoE,EAAMuC,cAAM,GAEf,kBAAC5G,EAAD,CAAUnC,MAAM,2BAAOoC,YAAY,oDAChCoE,EAAMwC,0BAAQ,GAEjB,kBAAC7G,EAAD,CAAUnC,MAAM,uCAASoC,YAAY,wFAClCoE,EAAMyC,sCAAU,GAEnB,kBAAC9G,EAAD,CAAUnC,MAAM,eAAKoC,YAAY,4BAC9BoE,EAAM0C,cAAM,GAEf,kBAAC/G,EAAD,CAAUnC,MAAM,qBAAMoC,YAAY,kCAC/BoE,EAAM2C,eAAO,GAEhB,kBAAChH,EAAD,CAAUnC,MAAM,wCAAUoJ,YAAa5C,EAAM6C,wCAInD,SAASC,EAAT,GAAqG,IAA9E9C,EAA6E,EAA7EA,MAAOjE,EAAsE,EAAtEA,SAC5B,OAAKiE,EAAM+C,yBAIT,6BACE,uBACEC,OAAO,SACPC,IAAI,sBACJ1L,UAAU,kDACV2L,KAAMC,aAAWC,cAAcpD,EAAM+C,yBAAK7F,GAAInB,EAASmB,KAEvD,8BAAOmG,mBAAiBC,iBAAiBtD,EAAM+C,yBAAKQ,OACpD,8BAAOJ,aAAWK,oBAAoBxD,EAAM+C,yBAAKU,cAEnD,wBAAIlM,UAAU,YACXyI,EAAM+C,yBAAKQ,KAAKxL,KAAI,SAAAmB,GAAC,OACpB,kBAACyC,EAAD,CAAU1D,IAAKiB,EAAEM,MAAOA,MAAON,EAAEM,OAC9BkK,gBAAcC,UAAUzK,SAhB1B,uBAAG3B,UAAU,eAAb,oDAuBX,SAASqM,EAAT,GAAkE,IAA3C7H,EAA0C,EAA1CA,SACf3D,EAAMyL,cAIZ,OAHA9I,qBAAU,WACR6E,EAAoBkE,MAAK,SAAA5K,GAAC,OAAIA,EAAE6K,eAC/B,CAAC3L,EAAIC,WAEN,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUH,KAAK,QAAQO,MAAM,4BAC3B,wBAAIlB,UAAU,OACZ,kBAAC4K,EAAD,CAAYpG,SAAUA,MAG1B,kBAAC,IAAD,CAAU7D,KAAK,WAAWO,MAAM,4BAC9B,wBAAIlB,UAAU,OACZ,kBAACuI,EAAD,CAAwB/D,SAAUA,EAAUgE,KAAMkB,MAGtD,kBAAC,IAAD,CAAU/I,KAAK,WAAWO,MAAM,4BAC9B,kBAACqH,EAAD,CAAwB/D,SAAUA,EAAUgE,KAAMJ,KAEpD,kBAAC,IAAD,CAAUzH,KAAK,OAAOO,MAAM,gBAC1B,wBAAIlB,UAAU,OACZ,kBAACuI,EAAD,CAAwB/D,SAAUA,EAAUgE,KAAMuC,MAGtD,kBAAC,IAAD,CAAUpK,KAAK,eAAeO,MAAM,4BAClC,kBAACqH,EAAD,CAAwB/D,SAAUA,EAAUgE,KAAM+C,KAEpD,kBAAC,IAAD,CAAU5K,KAAK,aAAaO,MAAM,4BAChC,kBAAC4G,EAAD,CAAerB,iBAAkBjC,EAASmB,OAG9C,kBAAC,IAAD,CAAY3F,UAAU,OAAOC,SAAO,EAACC,WAAS,IAC9C,kBAAC,IAAD,CAAYmB,aAAa,KAKhB,SAASoL,IACtB,IAAMC,EAAc/F,cACdnC,EAAWkI,EAAYC,cAK7B,OAJAnJ,qBAAU,WACR6E,EAAoBkE,MAAK,SAAA5K,GAAC,OAAIA,EAAE6K,gBAElChJ,oBAAUoF,IAAiB,GAAGpE,IACzBA,GAAaA,EAASoD,SAIzB,6BACE,kBAACgF,EAAA,OAAD,KACE,+BAAQpI,EAASoD,WAEnB,wBAAI5H,UAAU,eAAd,qBAAgCwE,EAASoD,UACzC,yBAAK5H,UAAU,YACb,yBAAKA,UAAU,YACb,wBAAIA,UAAU,oBAAd,4BACA,kBAACmI,EAAD,CAAiBuE,YAAaA,EAAajJ,SAAUe,EAASmB,GAAIkH,OAAQ,IAC1E,kBAACR,EAAD,CAAa7H,SAAUA,KAEzB,yBAAKxE,UAAU,YACb,wBAAIA,UAAU,oBAAd,4BACA,kBAAC+H,EAAD,CAAevD,SAAUA,MAG7B,kBAACtC,EAAD,CAAuBC,WAAW,IAClC,kBAACmG,EAAD,CAAcwE,OAAO,QAAQC,WAAW,EAAMC,MAAM,SApB/C,kBAAC,IAAD","file":"static/js/8.86e6c3ec.chunk.js","sourcesContent":["import React from \"react\";\nimport { useContext } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { useRouteMatch, Switch, Route, Redirect } from \"react-router\";\nimport { Helmet } from \"react-helmet\";\n\ntype RouteDefProps = { path: string; title: string; children: React.ReactChild | React.ReactChildren };\nexport const RouteDef: React.FunctionComponent<RouteDefProps> = () => {\n  throw new Error(\"Not intended for rendering\");\n};\n\ntype RoutesProps = { children: React.FunctionComponentElement<RouteDefProps>[] };\nexport const ViewRoutes: React.FunctionComponent<RoutesProps> = () => {\n  throw new Error(\"Not intended for rendering\");\n};\n\nconst Context = React.createContext<RouteDefProps[]>([]);\n\nexport function NavButtons({ className = \"\", replace = false, keepState = false }) {\n  const routes = useContext(Context);\n  const match = useRouteMatch() || { url: \"\" };\n  return (\n    <nav className={`nav nav-pills mb-3 ${className}`}>\n      {routes.map(route => (\n        <NavLink\n          key={route.path}\n          to={loc => ({ pathname: `${match.url}/${route.path}`, state: keepState ? loc.state : undefined })}\n          replace={replace}\n          className=\"nav-link\"\n          activeClassName=\"active\"\n        >\n          {route.title}\n        </NavLink>\n      ))}\n    </nav>\n  );\n}\n\nexport function ViewSwitch({\n  defaultPath,\n  mutateTitle = true,\n  children\n}: {\n  defaultPath?: string;\n  mutateTitle?: boolean;\n  children?: React.ReactChild | React.ReactChildren;\n}) {\n  const routes = useContext(Context);\n  const match = useRouteMatch() || { url: \"\" };\n\n  return (\n    <Switch>\n      {routes.map(route => (\n        <Route key={route.path} path={`${match.url}/${route.path}`}>\n          {mutateTitle && (\n            <Helmet>\n              <title>{route.title}</title>\n            </Helmet>\n          )}\n          {route.children}\n        </Route>\n      ))}\n      <Route>\n        <Redirect to={`${match.url}/${defaultPath || routes[0].path}`} />\n      </Route>\n      {children}\n    </Switch>\n  );\n}\n\nexport function SimpleRoutedSubViews({\n  children\n}: {\n  children: [React.FunctionComponentElement<RoutesProps>, ...(React.ReactChild | React.ReactChildren)[]];\n}) {\n  return <Context.Provider value={children[0].props.children.map(x => x.props)}>{children.slice(1)}</Context.Provider>;\n}\n","import React from \"react\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { DATE_MIN } from \"../../utils/constants\";\nimport { FormRow } from \"../form/formRow\";\nimport { useModel } from \"../gameRecords/model\";\nimport { CheckboxGroup, DatePicker } from \"../form\";\nimport dayjs from \"dayjs\";\nimport { ModeSelector } from \"../gameRecords/modeSelector\";\n\nenum DateRangeOptions {\n  All = \"全部\",\n  Last4Weeks = \"最近四周\",\n  Custom = \"自定义\"\n}\nconst DATE_RANGE_ITEMS = Object.keys(DateRangeOptions).map((key: string) => ({\n  key: DateRangeOptions[key as keyof typeof DateRangeOptions],\n  label: DateRangeOptions[key as keyof typeof DateRangeOptions]\n}));\n\nexport default function PlayerDetailsSettings({ showLevel = false }) {\n  const [model, updateModel] = useModel();\n  const [mode, setMode] = useState(() => {\n    if (model.type !== \"player\") {\n      return DateRangeOptions.All;\n    }\n    if (!model.startDate) {\n      return DateRangeOptions.All;\n    }\n    if (\n      (!model.endDate || dayjs(model.endDate).isSame(dayjs(), \"day\")) &&\n      dayjs(model.startDate).isSame(dayjs().subtract(27, \"day\"), \"day\")\n    ) {\n      return DateRangeOptions.Last4Weeks;\n    }\n    return DateRangeOptions.Custom;\n  });\n  const [customDateFrom, setCustomDateFrom] = useState(() =>\n    model.type === \"player\" && model.startDate ? model.startDate : DATE_MIN\n  );\n  const [customDateTo, setCustomDateTo] = useState(() =>\n    model.type === \"player\" && model.endDate ? model.endDate : dayjs()\n  );\n  useEffect(() => {\n    if (model.type !== \"player\") {\n      return;\n    }\n    switch (mode) {\n      case DateRangeOptions.All:\n        updateModel({\n          type: \"player\",\n          playerId: model.playerId,\n          startDate: null,\n          endDate: null,\n          selectedMode: undefined\n        });\n        break;\n      case DateRangeOptions.Last4Weeks:\n        updateModel({\n          type: \"player\",\n          playerId: model.playerId,\n          startDate: dayjs().subtract(27, \"day\"),\n          endDate: null\n        });\n        break;\n      case DateRangeOptions.Custom:\n        updateModel({\n          type: \"player\",\n          playerId: model.playerId,\n          startDate: customDateFrom,\n          endDate: customDateTo\n        });\n        break;\n    }\n  }, [model, mode, customDateFrom, customDateTo, updateModel]);\n  const setSelectedMode = useCallback(mode => updateModel({ type: \"player\", selectedMode: mode }), [updateModel]);\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-6\">\n          <FormRow title=\"时间\" inline={true}>\n            <CheckboxGroup\n              type=\"radio\"\n              selectedItemKey={mode}\n              items={DATE_RANGE_ITEMS}\n              groupKey=\"PlayerDetailsDateRangeSelector\"\n              onChange={setMode as (x: string) => void}\n            />\n          </FormRow>\n        </div>\n        {showLevel && (\n          <div className=\"col-6\">\n            <FormRow title=\"等级\" inline={true}>\n              <ModeSelector mode={model.selectedMode} onChange={setSelectedMode} />\n            </FormRow>\n          </div>\n        )}\n      </div>\n      {mode === DateRangeOptions.Custom ? (\n        <div className=\"row mt-n3\">\n          <div className=\"col-6\">\n            <FormRow inline={true}>\n              <DatePicker min={DATE_MIN} onChange={setCustomDateFrom} date={customDateFrom} className=\"form-control\" />\n              <DatePicker min={DATE_MIN} onChange={setCustomDateTo} date={customDateTo} className=\"form-control\" />\n            </FormRow>\n          </div>\n        </div>\n      ) : null}\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function StatItem({ label, description, className = \"\", children }: {\n  label: string;\n  description?: string;\n  className?: string;\n  children: React.ReactChild;\n}) {\n  return (<>\n    <dt className={`col-2 col-lg-1 text-nowrap ${className}`}>{label}</dt>\n    <dd className={`col-4 col-lg-3 text-right ${className}`} data-tip={description || \"\"}>\n      {children}\n    </dd>\n  </>);\n}\n","import React from \"react\";\nimport { LevelWithDelta, PlayerMetadata, GameMode, Level } from \"../../data/types\";\nimport { useModel } from \"../gameRecords/model\";\nimport StatItem from \"./statItem\";\n\nexport default function EstimatedStableLevel({ metadata }: { metadata: PlayerMetadata }) {\n  const [model] = useModel();\n  const level = LevelWithDelta.getAdjustedLevel(metadata.level);\n  const mode = model.selectedMode\n    ? (parseInt(model.selectedMode) as GameMode)\n    : LevelWithDelta.getTag(metadata.level) === \"魂\"\n    ? GameMode.王座\n    : GameMode.玉;\n  const notEnoughData = metadata.count < 100;\n  const expectedGamePoint = PlayerMetadata.calculateExpectedGamePoint(metadata, mode);\n  let estimatedNumGamesToChangeLevel = null as number | null;\n  if (level.getMaxPoint() && level.isAllowedMode(mode)) {\n    const curPoint = level.isSame(new Level(metadata.level.id))\n      ? metadata.level.score + metadata.level.delta\n      : level.getStartingPoint();\n    estimatedNumGamesToChangeLevel =\n      expectedGamePoint > 0 ? (level.getMaxPoint() - curPoint) / expectedGamePoint : curPoint / expectedGamePoint;\n  }\n  const changeLevelMsg = estimatedNumGamesToChangeLevel\n    ? `，括号内为预计${estimatedNumGamesToChangeLevel > 0 ? \"升\" : \"降\"}段场数`\n    : \"\";\n  return (\n    <>\n      <StatItem\n        label=\"安定段位\"\n        description={`在${GameMode[mode]}之间一直进行对局，预测最终能达到的段位。${\n          notEnoughData ? \"（数据量不足，计算结果可能有较大偏差）\" : \"\"\n        }<br/>一二三位平均 Pt / 四位平均得点 Pt：[${PlayerMetadata.getStableLevelComponents(metadata, mode)\n          .map(x => x.toFixed(2))\n          .join(\"/\")}]`}\n        className={notEnoughData ? \"font-italic font-lighter text-muted\" : \"\"}\n      >\n        <span>\n          {PlayerMetadata.estimateStableLevel2(metadata, mode)}\n          {notEnoughData && \"?\"}\n        </span>\n      </StatItem>\n      <StatItem\n        label=\"分数期望\"\n        description={`在${GameMode[mode]}之间每局获得点数的数学期望值${changeLevelMsg}${\n          notEnoughData ? \"（数据量不足，计算结果可能有较大偏差）\" : \"\"\n        }`}\n        className={notEnoughData ? \"font-italic font-lighter text-muted\" : \"\"}\n      >\n        <span>\n          {expectedGamePoint.toFixed(1)}\n          {estimatedNumGamesToChangeLevel ? ` (${Math.abs(estimatedNumGamesToChangeLevel).toFixed(0)})` : \"\"}\n          {notEnoughData && \"?\"}\n        </span>\n      </StatItem>\n    </>\n  );\n}\n","import React, { useMemo } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDataAdapter } from \"../gameRecords/dataAdapterProvider\";\nimport { PlayerRecord } from \"../../data/types\";\nimport Loading from \"../misc/loading\";\nimport { generatePlayerPathById } from \"../gameRecords/routes\";\nimport { formatPercent } from \"../../utils\";\nimport { SimpleRoutedSubViews, ViewRoutes, RouteDef, NavButtons, ViewSwitch } from \"../routing\";\n\nexport function SameMatchRateTable({ numGames = 100, numDisplay = 10, currentAccountId = 0 }) {\n  const adapter = useDataAdapter();\n  const count = adapter.getCount();\n  const numProcessedGames = Math.min(count, numGames);\n  const rates = useMemo(() => {\n    if (count <= 0) {\n      return null;\n    }\n    const map: { [key: number]: { player: PlayerRecord; count: number } } = {};\n    for (let i = 0; i < numProcessedGames; i++) {\n      const game = adapter.getItem(i);\n      if (!(\"uuid\" in game)) {\n        return null; // Not loaded, try again later\n      }\n      for (const player of game.players) {\n        if (player.accountId === currentAccountId) {\n          continue;\n        }\n        if (!map[player.accountId]) {\n          map[player.accountId] = {\n            player,\n            count: 0\n          };\n        }\n        map[player.accountId].count++;\n      }\n    }\n    const result = Object.values(map);\n    result.sort((a, b) => b.count - a.count);\n    return result;\n  }, [count, adapter, numProcessedGames, currentAccountId]);\n  if (count <= 0) {\n    return null;\n  }\n  if (!rates) {\n    return <Loading />;\n  }\n  return (\n    <dl className=\"row\">\n      {rates.slice(0, numDisplay).map(x => (\n        <>\n          <dt className=\"col-8 col-lg-4 font-weight-normal\">\n            <Link to={generatePlayerPathById(x.player.accountId)}>{x.player.nickname}</Link>\n          </dt>\n          <dd className=\"col-4 col-lg-2 text-right\">\n            {formatPercent(x.count / numProcessedGames)} ({x.count})\n          </dd>\n        </>\n      ))}\n    </dl>\n  );\n}\n\nexport default function SameMatchRate({ numDisplay = 10, currentAccountId = 0 }) {\n  return (\n    <SimpleRoutedSubViews>\n      <ViewRoutes>\n        <RouteDef path=\"latest\" title=\"最近 100 局\">\n          <SameMatchRateTable currentAccountId={currentAccountId} numDisplay={numDisplay} />\n        </RouteDef>\n        <RouteDef path=\"all\" title=\"全部\">\n          <SameMatchRateTable currentAccountId={currentAccountId} numDisplay={numDisplay} numGames={0x7fffffff} />\n        </RouteDef>\n      </ViewRoutes>\n      <NavButtons className=\"mt-n3\" />\n      <ViewSwitch mutateTitle={false} />\n    </SimpleRoutedSubViews>\n  );\n}\n","import React from \"react\";\nimport Loadable from \"../misc/customizedLoadable\";\nimport { Helmet } from \"react-helmet\";\n\nimport { useDataAdapter } from \"../gameRecords/dataAdapterProvider\";\nimport { useEffect } from \"react\";\nimport { triggerRelayout, formatPercent, useAsync, formatFixed3 } from \"../../utils/index\";\nimport {\n  LevelWithDelta,\n  PlayerExtendedStats,\n  PlayerMetadata,\n  GameRecord,\n  FanStatEntry2,\n  FanStatEntryList\n} from \"../../data/types\";\nimport Loading from \"../misc/loading\";\nimport PlayerDetailsSettings from \"./playerDetailsSettings\";\nimport StatItem from \"./statItem\";\nimport EstimatedStableLevel from \"./estimatedStableLevel\";\nimport { Level } from \"../../data/types/level\";\nimport { ViewRoutes, RouteDef, SimpleRoutedSubViews, NavButtons, ViewSwitch } from \"../routing\";\nimport { useLocation } from \"react-router-dom\";\nimport SameMatchRate from \"./sameMatchRate\";\n\nconst RankRateChart = Loadable({\n  loader: () => import(\"./charts/rankRate\"),\n  loading: () => <Loading />\n});\nconst RecentRankChart = Loadable({\n  loader: () => import(\"./charts/recentRank\"),\n  loading: () => <Loading />\n});\nconst WinLoseDistribution = Loadable({\n  loader: () => import(\"./charts/winLoseDistribution\"),\n  loading: () => <Loading />\n});\nconst ReactTooltipPromise = import(\"react-tooltip\");\nconst ReactTooltip = Loadable({\n  loader: () => ReactTooltipPromise,\n  loading: () => null\n});\n\nfunction ExtendedStatsViewAsync({\n  metadata,\n  view\n}: {\n  metadata: PlayerMetadata;\n  view: React.ComponentType<{ stats: PlayerExtendedStats; metadata: PlayerMetadata }>;\n}) {\n  const stats = useAsync(metadata.extended_stats);\n  useEffect(triggerRelayout, [!!stats]);\n  if (!stats) {\n    return null;\n  }\n  const View = view;\n  return <View stats={stats} metadata={metadata} />;\n}\n\nfunction PlayerExtendedStatsView({ stats }: { stats: PlayerExtendedStats }) {\n  return (\n    <>\n      <StatItem label=\"和牌率\" description=\"和牌局数 / 总局数\">\n        {formatPercent(stats.和牌率 || 0)}\n      </StatItem>\n      <StatItem label=\"放铳率\" description=\"放铳局数 / 总局数\">\n        {formatPercent(stats.放铳率 || 0)}\n      </StatItem>\n      <StatItem label=\"自摸率\" description=\"自摸局数 / 和牌局数\">\n        {formatPercent(stats.自摸率 || 0)}\n      </StatItem>\n      <StatItem label=\"默胡率\" description=\"门清默听和牌局数 / 和牌局数\">\n        {formatPercent(stats.默听率 || 0)}\n      </StatItem>\n      <StatItem label=\"流局率\" description=\"流局局数 / 总局数\">\n        {formatPercent(stats.流局率 || 0)}\n      </StatItem>\n      <StatItem label=\"流听率\" description=\"流局听牌局数 / 流局局数\">\n        {formatPercent(stats.流听率 || 0)}\n      </StatItem>\n      <StatItem label=\"副露率\" description=\"副露局数 / 总局数\">\n        {formatPercent(stats.副露率 || 0)}\n      </StatItem>\n      <StatItem label=\"立直率\" description=\"立直局数 / 总局数\">\n        {formatPercent(stats.立直率 || 0)}\n      </StatItem>\n      <StatItem label=\"和了巡数\">{(stats.和了巡数 || 0).toFixed(3)}</StatItem>\n      <StatItem label=\"平均打点\">{stats.平均打点 || 0}</StatItem>\n      <StatItem label=\"平均铳点\">{stats.平均铳点 || 0}</StatItem>\n    </>\n  );\n}\n\nfunction fixMaxLevel(level: LevelWithDelta): LevelWithDelta {\n  const levelObj = new Level(level.id);\n  if (level.score + level.delta < levelObj.getStartingPoint()) {\n    return {\n      id: level.id,\n      score: levelObj.getStartingPoint(),\n      delta: 0\n    };\n  }\n  return level;\n}\n\nfunction MoreStats({ stats, metadata }: { stats: PlayerExtendedStats; metadata: PlayerMetadata }) {\n  return (\n    <>\n      <StatItem label=\"最高等级\">{LevelWithDelta.getTag(metadata.max_level)}</StatItem>\n      <StatItem label=\"最高分数\">{LevelWithDelta.formatAdjustedScore(fixMaxLevel(metadata.max_level))}</StatItem>\n      <StatItem label=\"最大连庄\">{stats.最大连庄 || 0}</StatItem>\n      <StatItem label=\"一发率\" description=\"一发局数 / 立直和了局数\">\n        {formatPercent(stats.一发率 || 0)}\n      </StatItem>\n      <StatItem label=\"里宝率\" description=\"中里宝局数 / 立直和了局数\">\n        {formatPercent(stats.里宝率 || 0)}\n      </StatItem>\n      <StatItem label=\"被炸率\" description=\"被炸庄（满贯或以上）次数 / 被自摸次数\">\n        {formatPercent(stats.被炸率 || 0)}\n      </StatItem>\n      <StatItem label=\"平均被炸点数\" description=\"被炸庄（满贯或以上）点数 / 次数\">\n        {stats.平均被炸点数 || 0}\n      </StatItem>\n      <StatItem label=\"放铳时立直率\" description=\"放铳时立直次数 / 放铳次数\">\n        {formatPercent(stats.放铳时立直率 || 0)}\n      </StatItem>\n      <StatItem label=\"放铳时副露率\" description=\"放铳时副露次数 / 放铳次数\">\n        {formatPercent(stats.放铳时副露率 || 0)}\n      </StatItem>\n      <StatItem label=\"立直后放铳率\" description=\"放铳时立直次数 / 立直次数\">\n        {formatPercent(stats.立直后放铳率 || 0)}\n      </StatItem>\n      <StatItem label=\"副露后放铳率\" description=\"放铳时副露次数 / 副露次数\">\n        {formatPercent(stats.副露后放铳率 || 0)}\n      </StatItem>\n      <StatItem label=\"立直后和牌率\" description=\"立直后和牌次数 / 立直次数\">\n        {formatPercent(stats.立直后和牌率 || 0)}\n      </StatItem>\n      <StatItem label=\"副露后和牌率\" description=\"副露后和牌次数 / 副露次数\">\n        {formatPercent(stats.副露后和牌率 || 0)}\n      </StatItem>\n      <StatItem label=\"立直后流局率\" description=\"立直后流局次数 / 立直次数\">\n        {formatPercent(stats.立直后流局率 || 0)}\n      </StatItem>\n      <StatItem label=\"副露后流局率\" description=\"副露后流局次数 / 副露次数\">\n        {formatPercent(stats.副露后流局率 || 0)}\n      </StatItem>\n    </>\n  );\n}\nfunction BasicStats({ metadata }: { metadata: PlayerMetadata }) {\n  return (\n    <>\n      <StatItem label=\"记录场数\">{metadata.count}</StatItem>\n      <StatItem label=\"记录等级\">{LevelWithDelta.getTag(metadata.level)}</StatItem>\n      <StatItem label=\"记录分数\">{LevelWithDelta.formatAdjustedScore(metadata.level)}</StatItem>\n      <ExtendedStatsViewAsync metadata={metadata} view={PlayerExtendedStatsView} />\n      <StatItem label=\"平均顺位\">{metadata.avg_rank.toFixed(3)}</StatItem>\n      <StatItem label=\"被飞率\">{formatPercent(metadata.negative_rate)}</StatItem>\n      <EstimatedStableLevel metadata={metadata} />\n    </>\n  );\n}\nfunction LuckStats({ stats }: { stats: PlayerExtendedStats }) {\n  return (\n    <>\n      <StatItem label=\"役满\" description=\"和出役满次数\">\n        {stats.役满 || 0}\n      </StatItem>\n      <StatItem label=\"累计役满\" description=\"和出累计役满次数\">\n        {stats.累计役满 || 0}\n      </StatItem>\n      <StatItem label=\"最大累计番数\" description=\"和出的最大番数（不含役满役）\">\n        {stats.最大累计番数 || 0}\n      </StatItem>\n      <StatItem label=\"流满\" description=\"流满次数\">\n        {stats.流满 || 0}\n      </StatItem>\n      <StatItem label=\"两立直\" description=\"两立直次数\">\n        {stats.W立直 || 0}\n      </StatItem>\n      <StatItem label=\"平均起手向听\">{formatFixed3(stats.平均起手向听)}</StatItem>\n    </>\n  );\n}\nfunction LargestLost({ stats, metadata }: { stats: PlayerExtendedStats; metadata: PlayerMetadata }) {\n  if (!stats.最近大铳) {\n    return <p className=\"text-center\">无满贯或以上大铳</p>;\n  }\n  return (\n    <div>\n      <a\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"d-flex justify-content-between font-weight-bold\"\n        href={GameRecord.getRecordLink(stats.最近大铳.id, metadata.id)}\n      >\n        <span>{FanStatEntryList.formatFanSummary(stats.最近大铳.fans)}</span>\n        <span>{GameRecord.formatFullStartTime(stats.最近大铳.start_time)}</span>\n      </a>\n      <dl className=\"row mt-2\">\n        {stats.最近大铳.fans.map(x => (\n          <StatItem key={x.label} label={x.label}>\n            {FanStatEntry2.formatFan(x)}\n          </StatItem>\n        ))}\n      </dl>\n    </div>\n  );\n}\nfunction PlayerStats({ metadata }: { metadata: PlayerMetadata }) {\n  const loc = useLocation();\n  useEffect(() => {\n    ReactTooltipPromise.then(x => x.rebuild());\n  }, [loc.pathname]);\n  return (\n    <SimpleRoutedSubViews>\n      <ViewRoutes>\n        <RouteDef path=\"basic\" title=\"基本数据\">\n          <dl className=\"row\">\n            <BasicStats metadata={metadata} />\n          </dl>\n        </RouteDef>\n        <RouteDef path=\"extended\" title=\"更多数据\">\n          <dl className=\"row\">\n            <ExtendedStatsViewAsync metadata={metadata} view={MoreStats} />\n          </dl>\n        </RouteDef>\n        <RouteDef path=\"win-lose\" title=\"和铳分布\">\n          <ExtendedStatsViewAsync metadata={metadata} view={WinLoseDistribution} />\n        </RouteDef>\n        <RouteDef path=\"luck\" title=\"血统\">\n          <dl className=\"row\">\n            <ExtendedStatsViewAsync metadata={metadata} view={LuckStats} />\n          </dl>\n        </RouteDef>\n        <RouteDef path=\"largest-lost\" title=\"最近大铳\">\n          <ExtendedStatsViewAsync metadata={metadata} view={LargestLost} />\n        </RouteDef>\n        <RouteDef path=\"same-match\" title=\"最常同桌\">\n          <SameMatchRate currentAccountId={metadata.id} />\n        </RouteDef>\n      </ViewRoutes>\n      <NavButtons className=\"mt-3\" replace keepState />\n      <ViewSwitch mutateTitle={false} />\n    </SimpleRoutedSubViews>\n  );\n}\n\nexport default function PlayerDetails() {\n  const dataAdapter = useDataAdapter();\n  const metadata = dataAdapter.getMetadata<PlayerMetadata>();\n  useEffect(() => {\n    ReactTooltipPromise.then(x => x.rebuild());\n  });\n  useEffect(triggerRelayout, [!!metadata]);\n  if (!metadata || !metadata.nickname) {\n    return <Loading />;\n  }\n  return (\n    <div>\n      <Helmet>\n        <title>{metadata.nickname}</title>\n      </Helmet>\n      <h2 className=\"text-center\">玩家：{metadata.nickname}</h2>\n      <div className=\"row mt-4\">\n        <div className=\"col-md-8\">\n          <h3 className=\"text-center mb-4\">最近走势</h3>\n          <RecentRankChart dataAdapter={dataAdapter} playerId={metadata.id} aspect={6} />\n          <PlayerStats metadata={metadata} />\n        </div>\n        <div className=\"col-md-4\">\n          <h3 className=\"text-center mb-4\">累计战绩</h3>\n          <RankRateChart metadata={metadata} />\n        </div>\n      </div>\n      <PlayerDetailsSettings showLevel={true} />\n      <ReactTooltip effect=\"solid\" multiline={true} place=\"top\" />\n    </div>\n  );\n}\n"],"sourceRoot":""}